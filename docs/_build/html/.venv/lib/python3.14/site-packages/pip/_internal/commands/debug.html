

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; Retrogue 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/custom.css?v=a6a68382" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/fonts.css?v=5583d106" />

  
      <script src="../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../_static/documentation_options.js?v=d45e8c67"></script>
      <script src="../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../index.html" class="icon icon-home">
            Retrogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">Retrogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../_sources/.venv/lib/python3.14/site-packages/pip/_internal/commands/debug.py.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>from <strong>future</strong> import annotations</p>
<p>import locale
import logging
import os
import sys
from optparse import Values
from types import ModuleType
from typing import Any</p>
<p>import pip._vendor
from pip._vendor.certifi import where
from pip._vendor.packaging.version import parse as parse_version</p>
<p>from pip._internal.cli import cmdoptions
from pip._internal.cli.base_command import Command
from pip._internal.cli.cmdoptions import make_target_python
from pip._internal.cli.status_codes import SUCCESS
from pip._internal.configuration import Configuration
from pip._internal.metadata import get_environment
from pip._internal.utils.compat import open_text_resource
from pip._internal.utils.logging import indent_log
from pip._internal.utils.misc import get_pip_version</p>
<p>logger = logging.getLogger(<strong>name</strong>)</p>
<p>def show_value(name: str, value: Any) -&gt; None:
logger.info(“%s: %s”, name, value)</p>
<p>def show_sys_implementation() -&gt; None:
logger.info(“sys.implementation:”)
implementation_name = sys.implementation.name
with indent_log():
show_value(“name”, implementation_name)</p>
<p>def create_vendor_txt_map() -&gt; dict[str, str]:
with open_text_resource(“pip._vendor”, “vendor.txt”) as f:
# Purge non version specifying lines.
# Also, remove any space prefix or suffixes (including comments).
lines = [
line.strip().split(” “, 1)[0] for line in f.readlines() if “==” in line
]</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Transform into &quot;module&quot; -&gt; version dict.
return dict(line.split(&quot;==&quot;, 1) for line in lines)
</pre></div>
</div>
<p>def get_module_from_module_name(module_name: str) -&gt; ModuleType | None:
# Module name can be uppercase in vendor.txt for some reason…
module_name = module_name.lower().replace(“-”, “_”)
# PATCH: setuptools is actually only pkg_resources.
if module_name == “setuptools”:
module_name = “pkg_resources”</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>try:
    __import__(f&quot;pip._vendor.{module_name}&quot;, globals(), locals(), level=0)
    return getattr(pip._vendor, module_name)
except ImportError:
    # We allow &#39;truststore&#39; to fail to import due
    # to being unavailable on Python 3.9 and earlier.
    if module_name == &quot;truststore&quot; and sys.version_info &lt; (3, 10):
        return None
    raise
</pre></div>
</div>
<p>def get_vendor_version_from_module(module_name: str) -&gt; str | None:
module = get_module_from_module_name(module_name)
version = getattr(module, “<strong>version</strong>”, None)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if module and not version:
    # Try to find version in debundled module info.
    assert module.__file__ is not None
    env = get_environment([os.path.dirname(module.__file__)])
    dist = env.get_distribution(module_name)
    if dist:
        version = str(dist.version)

return version
</pre></div>
</div>
<p>def show_actual_vendor_versions(vendor_txt_versions: dict[str, str]) -&gt; None:
“””Log the actual version and print extra info if there is
a conflict or if the actual version could not be imported.
“””
for module_name, expected_version in vendor_txt_versions.items():
extra_message = “”
actual_version = get_vendor_version_from_module(module_name)
if not actual_version:
extra_message = (
“ (Unable to locate actual module version, using”
“ vendor.txt specified version)”
)
actual_version = expected_version
elif parse_version(actual_version) != parse_version(expected_version):
extra_message = (
“ (CONFLICT: vendor.txt suggests version should”
f” be {expected_version})”
)
logger.info(“%s==%s%s”, module_name, actual_version, extra_message)</p>
<p>def show_vendor_versions() -&gt; None:
logger.info(“vendored library versions:”)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vendor_txt_versions = create_vendor_txt_map()
with indent_log():
    show_actual_vendor_versions(vendor_txt_versions)
</pre></div>
</div>
<p>def show_tags(options: Values) -&gt; None:
tag_limit = 10</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>target_python = make_target_python(options)
tags = target_python.get_sorted_tags()

# Display the target options that were explicitly provided.
formatted_target = target_python.format_given()
suffix = &quot;&quot;
if formatted_target:
    suffix = f&quot; (target: {formatted_target})&quot;

msg = f&quot;Compatible tags: {len(tags)}{suffix}&quot;
logger.info(msg)

if options.verbose &lt; 1 and len(tags) &gt; tag_limit:
    tags_limited = True
    tags = tags[:tag_limit]
else:
    tags_limited = False

with indent_log():
    for tag in tags:
        logger.info(str(tag))

    if tags_limited:
        msg = f&quot;...\n[First {tag_limit} tags shown. Pass --verbose to show all.]&quot;
        logger.info(msg)
</pre></div>
</div>
<p>def ca_bundle_info(config: Configuration) -&gt; str:
levels = {key.split(“.”, 1)[0] for key, _ in config.items()}
if not levels:
return “Not specified”</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>levels_that_override_global = [&quot;install&quot;, &quot;wheel&quot;, &quot;download&quot;]
global_overriding_level = [
    level for level in levels if level in levels_that_override_global
]
if not global_overriding_level:
    return &quot;global&quot;

if &quot;global&quot; in levels:
    levels.remove(&quot;global&quot;)
return &quot;, &quot;.join(levels)
</pre></div>
</div>
<p>class DebugCommand(Command):
“””
Display debug information.
“””</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage = &quot;&quot;&quot;
  %prog &lt;options&gt;&quot;&quot;&quot;
ignore_require_venv = True

def add_options(self) -&gt; None:
    cmdoptions.add_target_python_options(self.cmd_opts)
    self.parser.insert_option_group(0, self.cmd_opts)
    self.parser.config.load()

def run(self, options: Values, args: list[str]) -&gt; int:
    logger.warning(
        &quot;This command is only meant for debugging. &quot;
        &quot;Do not use this with automation for parsing and getting these &quot;
        &quot;details, since the output and options of this command may &quot;
        &quot;change without notice.&quot;
    )
    show_value(&quot;pip version&quot;, get_pip_version())
    show_value(&quot;sys.version&quot;, sys.version)
    show_value(&quot;sys.executable&quot;, sys.executable)
    show_value(&quot;sys.getdefaultencoding&quot;, sys.getdefaultencoding())
    show_value(&quot;sys.getfilesystemencoding&quot;, sys.getfilesystemencoding())
    show_value(
        &quot;locale.getpreferredencoding&quot;,
        locale.getpreferredencoding(),
    )
    show_value(&quot;sys.platform&quot;, sys.platform)
    show_sys_implementation()

    show_value(&quot;&#39;cert&#39; config value&quot;, ca_bundle_info(self.parser.config))
    show_value(&quot;REQUESTS_CA_BUNDLE&quot;, os.environ.get(&quot;REQUESTS_CA_BUNDLE&quot;))
    show_value(&quot;CURL_CA_BUNDLE&quot;, os.environ.get(&quot;CURL_CA_BUNDLE&quot;))
    show_value(&quot;pip._vendor.certifi.where()&quot;, where())
    show_value(&quot;pip._vendor.DEBUNDLED&quot;, pip._vendor.DEBUNDLED)

    show_vendor_versions()

    show_tags(options)

    return SUCCESS
</pre></div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Adam Worsnip.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>