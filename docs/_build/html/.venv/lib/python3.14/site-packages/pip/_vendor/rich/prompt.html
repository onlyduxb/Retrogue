

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; Retrogue 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/custom.css?v=a6a68382" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/fonts.css?v=5583d106" />

  
      <script src="../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../_static/documentation_options.js?v=d45e8c67"></script>
      <script src="../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../index.html" class="icon icon-home">
            Retrogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">Retrogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../_sources/.venv/lib/python3.14/site-packages/pip/_vendor/rich/prompt.py.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>from typing import Any, Generic, List, Optional, TextIO, TypeVar, Union, overload</p>
<p>from . import get_console
from .console import Console
from .text import Text, TextType</p>
<p>PromptType = TypeVar(“PromptType”)
DefaultType = TypeVar(“DefaultType”)</p>
<p>class PromptError(Exception):
“””Exception base class for prompt related errors.”””</p>
<p>class InvalidResponse(PromptError):
“””Exception to indicate a response was invalid. Raise this within process_response() to indicate an error
and provide an error message.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Args:
    message (Union[str, Text]): Error message.
&quot;&quot;&quot;

def __init__(self, message: TextType) -&gt; None:
    self.message = message

def __rich__(self) -&gt; TextType:
    return self.message
</pre></div>
</div>
<p>class PromptBase(Generic[PromptType]):
“””Ask the user for input until a valid response is received. This is the base class, see one of
the concrete classes for examples.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Args:
    prompt (TextType, optional): Prompt text. Defaults to &quot;&quot;.
    console (Console, optional): A Console instance or None to use global console. Defaults to None.
    password (bool, optional): Enable password input. Defaults to False.
    choices (List[str], optional): A list of valid choices. Defaults to None.
    case_sensitive (bool, optional): Matching of choices should be case-sensitive. Defaults to True.
    show_default (bool, optional): Show default in prompt. Defaults to True.
    show_choices (bool, optional): Show choices in prompt. Defaults to True.
&quot;&quot;&quot;

response_type: type = str

validate_error_message = &quot;[prompt.invalid]Please enter a valid value&quot;
illegal_choice_message = (
    &quot;[prompt.invalid.choice]Please select one of the available options&quot;
)
prompt_suffix = &quot;: &quot;

choices: Optional[List[str]] = None

def __init__(
    self,
    prompt: TextType = &quot;&quot;,
    *,
    console: Optional[Console] = None,
    password: bool = False,
    choices: Optional[List[str]] = None,
    case_sensitive: bool = True,
    show_default: bool = True,
    show_choices: bool = True,
) -&gt; None:
    self.console = console or get_console()
    self.prompt = (
        Text.from_markup(prompt, style=&quot;prompt&quot;)
        if isinstance(prompt, str)
        else prompt
    )
    self.password = password
    if choices is not None:
        self.choices = choices
    self.case_sensitive = case_sensitive
    self.show_default = show_default
    self.show_choices = show_choices

@classmethod
@overload
def ask(
    cls,
    prompt: TextType = &quot;&quot;,
    *,
    console: Optional[Console] = None,
    password: bool = False,
    choices: Optional[List[str]] = None,
    case_sensitive: bool = True,
    show_default: bool = True,
    show_choices: bool = True,
    default: DefaultType,
    stream: Optional[TextIO] = None,
) -&gt; Union[DefaultType, PromptType]:
    ...

@classmethod
@overload
def ask(
    cls,
    prompt: TextType = &quot;&quot;,
    *,
    console: Optional[Console] = None,
    password: bool = False,
    choices: Optional[List[str]] = None,
    case_sensitive: bool = True,
    show_default: bool = True,
    show_choices: bool = True,
    stream: Optional[TextIO] = None,
) -&gt; PromptType:
    ...

@classmethod
def ask(
    cls,
    prompt: TextType = &quot;&quot;,
    *,
    console: Optional[Console] = None,
    password: bool = False,
    choices: Optional[List[str]] = None,
    case_sensitive: bool = True,
    show_default: bool = True,
    show_choices: bool = True,
    default: Any = ...,
    stream: Optional[TextIO] = None,
) -&gt; Any:
    &quot;&quot;&quot;Shortcut to construct and run a prompt loop and return the result.

    Example:
        &gt;&gt;&gt; filename = Prompt.ask(&quot;Enter a filename&quot;)

    Args:
        prompt (TextType, optional): Prompt text. Defaults to &quot;&quot;.
        console (Console, optional): A Console instance or None to use global console. Defaults to None.
        password (bool, optional): Enable password input. Defaults to False.
        choices (List[str], optional): A list of valid choices. Defaults to None.
        case_sensitive (bool, optional): Matching of choices should be case-sensitive. Defaults to True.
        show_default (bool, optional): Show default in prompt. Defaults to True.
        show_choices (bool, optional): Show choices in prompt. Defaults to True.
        stream (TextIO, optional): Optional text file open for reading to get input. Defaults to None.
    &quot;&quot;&quot;
    _prompt = cls(
        prompt,
        console=console,
        password=password,
        choices=choices,
        case_sensitive=case_sensitive,
        show_default=show_default,
        show_choices=show_choices,
    )
    return _prompt(default=default, stream=stream)

def render_default(self, default: DefaultType) -&gt; Text:
    &quot;&quot;&quot;Turn the supplied default in to a Text instance.

    Args:
        default (DefaultType): Default value.

    Returns:
        Text: Text containing rendering of default value.
    &quot;&quot;&quot;
    return Text(f&quot;({default})&quot;, &quot;prompt.default&quot;)

def make_prompt(self, default: DefaultType) -&gt; Text:
    &quot;&quot;&quot;Make prompt text.

    Args:
        default (DefaultType): Default value.

    Returns:
        Text: Text to display in prompt.
    &quot;&quot;&quot;
    prompt = self.prompt.copy()
    prompt.end = &quot;&quot;

    if self.show_choices and self.choices:
        _choices = &quot;/&quot;.join(self.choices)
        choices = f&quot;[{_choices}]&quot;
        prompt.append(&quot; &quot;)
        prompt.append(choices, &quot;prompt.choices&quot;)

    if (
        default != ...
        and self.show_default
        and isinstance(default, (str, self.response_type))
    ):
        prompt.append(&quot; &quot;)
        _default = self.render_default(default)
        prompt.append(_default)

    prompt.append(self.prompt_suffix)

    return prompt

@classmethod
def get_input(
    cls,
    console: Console,
    prompt: TextType,
    password: bool,
    stream: Optional[TextIO] = None,
) -&gt; str:
    &quot;&quot;&quot;Get input from user.

    Args:
        console (Console): Console instance.
        prompt (TextType): Prompt text.
        password (bool): Enable password entry.

    Returns:
        str: String from user.
    &quot;&quot;&quot;
    return console.input(prompt, password=password, stream=stream)

def check_choice(self, value: str) -&gt; bool:
    &quot;&quot;&quot;Check value is in the list of valid choices.

    Args:
        value (str): Value entered by user.

    Returns:
        bool: True if choice was valid, otherwise False.
    &quot;&quot;&quot;
    assert self.choices is not None
    if self.case_sensitive:
        return value.strip() in self.choices
    return value.strip().lower() in [choice.lower() for choice in self.choices]

def process_response(self, value: str) -&gt; PromptType:
    &quot;&quot;&quot;Process response from user, convert to prompt type.

    Args:
        value (str): String typed by user.

    Raises:
        InvalidResponse: If ``value`` is invalid.

    Returns:
        PromptType: The value to be returned from ask method.
    &quot;&quot;&quot;
    value = value.strip()
    try:
        return_value: PromptType = self.response_type(value)
    except ValueError:
        raise InvalidResponse(self.validate_error_message)

    if self.choices is not None:
        if not self.check_choice(value):
            raise InvalidResponse(self.illegal_choice_message)

        if not self.case_sensitive:
            # return the original choice, not the lower case version
            return_value = self.response_type(
                self.choices[
                    [choice.lower() for choice in self.choices].index(value.lower())
                ]
            )
    return return_value

def on_validate_error(self, value: str, error: InvalidResponse) -&gt; None:
    &quot;&quot;&quot;Called to handle validation error.

    Args:
        value (str): String entered by user.
        error (InvalidResponse): Exception instance the initiated the error.
    &quot;&quot;&quot;
    self.console.print(error)

def pre_prompt(self) -&gt; None:
    &quot;&quot;&quot;Hook to display something before the prompt.&quot;&quot;&quot;

@overload
def __call__(self, *, stream: Optional[TextIO] = None) -&gt; PromptType:
    ...

@overload
def __call__(
    self, *, default: DefaultType, stream: Optional[TextIO] = None
) -&gt; Union[PromptType, DefaultType]:
    ...

def __call__(self, *, default: Any = ..., stream: Optional[TextIO] = None) -&gt; Any:
    &quot;&quot;&quot;Run the prompt loop.

    Args:
        default (Any, optional): Optional default value.

    Returns:
        PromptType: Processed value.
    &quot;&quot;&quot;
    while True:
        self.pre_prompt()
        prompt = self.make_prompt(default)
        value = self.get_input(self.console, prompt, self.password, stream=stream)
        if value == &quot;&quot; and default != ...:
            return default
        try:
            return_value = self.process_response(value)
        except InvalidResponse as error:
            self.on_validate_error(value, error)
            continue
        else:
            return return_value
</pre></div>
</div>
<p>class Prompt(PromptBase[str]):
“””A prompt that returns a str.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Example:
    &gt;&gt;&gt; name = Prompt.ask(&quot;Enter your name&quot;)


&quot;&quot;&quot;

response_type = str
</pre></div>
</div>
<p>class IntPrompt(PromptBase[int]):
“””A prompt that returns an integer.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Example:
    &gt;&gt;&gt; burrito_count = IntPrompt.ask(&quot;How many burritos do you want to order&quot;)

&quot;&quot;&quot;

response_type = int
validate_error_message = &quot;[prompt.invalid]Please enter a valid integer number&quot;
</pre></div>
</div>
<p>class FloatPrompt(PromptBase[float]):
“””A prompt that returns a float.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Example:
    &gt;&gt;&gt; temperature = FloatPrompt.ask(&quot;Enter desired temperature&quot;)

&quot;&quot;&quot;

response_type = float
validate_error_message = &quot;[prompt.invalid]Please enter a number&quot;
</pre></div>
</div>
<p>class Confirm(PromptBase[bool]):
“””A yes / no confirmation prompt.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Example:
    &gt;&gt;&gt; if Confirm.ask(&quot;Continue&quot;):
            run_job()

&quot;&quot;&quot;

response_type = bool
validate_error_message = &quot;[prompt.invalid]Please enter Y or N&quot;
choices: List[str] = [&quot;y&quot;, &quot;n&quot;]

def render_default(self, default: DefaultType) -&gt; Text:
    &quot;&quot;&quot;Render the default as (y) or (n) rather than True/False.&quot;&quot;&quot;
    yes, no = self.choices
    return Text(f&quot;({yes})&quot; if default else f&quot;({no})&quot;, style=&quot;prompt.default&quot;)

def process_response(self, value: str) -&gt; bool:
    &quot;&quot;&quot;Convert choices to a bool.&quot;&quot;&quot;
    value = value.strip().lower()
    if value not in self.choices:
        raise InvalidResponse(self.validate_error_message)
    return value == self.choices[0]
</pre></div>
</div>
<p>if <strong>name</strong> == “<strong>main</strong>”:  # pragma: no cover
from pip._vendor.rich import print</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if Confirm.ask(&quot;Run [i]prompt[/i] tests?&quot;, default=True):
    while True:
        result = IntPrompt.ask(
            &quot;:rocket: Enter a number between [b]1[/b] and [b]10[/b]&quot;, default=5
        )
        if result &gt;= 1 and result &lt;= 10:
            break
        print(&quot;:pile_of_poo: [prompt.invalid]Number must be between 1 and 10&quot;)
    print(f&quot;number={result}&quot;)

    while True:
        password = Prompt.ask(
            &quot;Please enter a password [cyan](must be at least 5 characters)&quot;,
            password=True,
        )
        if len(password) &gt;= 5:
            break
        print(&quot;[prompt.invalid]password too short&quot;)
    print(f&quot;password={password!r}&quot;)

    fruit = Prompt.ask(&quot;Enter a fruit&quot;, choices=[&quot;apple&quot;, &quot;orange&quot;, &quot;pear&quot;])
    print(f&quot;fruit={fruit!r}&quot;)

    doggie = Prompt.ask(
        &quot;What&#39;s the best Dog? (Case INSENSITIVE)&quot;,
        choices=[&quot;Border Terrier&quot;, &quot;Collie&quot;, &quot;Labradoodle&quot;],
        case_sensitive=False,
    )
    print(f&quot;doggie={doggie!r}&quot;)

else:
    print(&quot;[b]OK :loudly_crying_face:&quot;)
</pre></div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Adam Worsnip.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>