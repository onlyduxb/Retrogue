

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; Retrogue 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/custom.css?v=a6a68382" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/fonts.css?v=5583d106" />

  
      <script src="../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../_static/documentation_options.js?v=d45e8c67"></script>
      <script src="../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../index.html" class="icon icon-home">
            Retrogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">Retrogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../_sources/.venv/lib/python3.14/site-packages/pip/_vendor/rich/_inspect.py.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>import inspect
from inspect import cleandoc, getdoc, getfile, isclass, ismodule, signature
from typing import Any, Collection, Iterable, Optional, Tuple, Type, Union</p>
<p>from .console import Group, RenderableType
from .control import escape_control_codes
from .highlighter import ReprHighlighter
from .jupyter import JupyterMixin
from .panel import Panel
from .pretty import Pretty
from .table import Table
from .text import Text, TextType</p>
<p>def _first_paragraph(doc: str) -&gt; str:
“””Get the first paragraph from a docstring.”””
paragraph, _, _ = doc.partition(“\n\n”)
return paragraph</p>
<p>class Inspect(JupyterMixin):
“””A renderable to inspect any Python Object.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Args:
    obj (Any): An object to inspect.
    title (str, optional): Title to display over inspect result, or None use type. Defaults to None.
    help (bool, optional): Show full help text rather than just first paragraph. Defaults to False.
    methods (bool, optional): Enable inspection of callables. Defaults to False.
    docs (bool, optional): Also render doc strings. Defaults to True.
    private (bool, optional): Show private attributes (beginning with underscore). Defaults to False.
    dunder (bool, optional): Show attributes starting with double underscore. Defaults to False.
    sort (bool, optional): Sort attributes alphabetically. Defaults to True.
    all (bool, optional): Show all attributes. Defaults to False.
    value (bool, optional): Pretty print value of object. Defaults to True.
&quot;&quot;&quot;

def __init__(
    self,
    obj: Any,
    *,
    title: Optional[TextType] = None,
    help: bool = False,
    methods: bool = False,
    docs: bool = True,
    private: bool = False,
    dunder: bool = False,
    sort: bool = True,
    all: bool = True,
    value: bool = True,
) -&gt; None:
    self.highlighter = ReprHighlighter()
    self.obj = obj
    self.title = title or self._make_title(obj)
    if all:
        methods = private = dunder = True
    self.help = help
    self.methods = methods
    self.docs = docs or help
    self.private = private or dunder
    self.dunder = dunder
    self.sort = sort
    self.value = value

def _make_title(self, obj: Any) -&gt; Text:
    &quot;&quot;&quot;Make a default title.&quot;&quot;&quot;
    title_str = (
        str(obj)
        if (isclass(obj) or callable(obj) or ismodule(obj))
        else str(type(obj))
    )
    title_text = self.highlighter(title_str)
    return title_text

def __rich__(self) -&gt; Panel:
    return Panel.fit(
        Group(*self._render()),
        title=self.title,
        border_style=&quot;scope.border&quot;,
        padding=(0, 1),
    )

def _get_signature(self, name: str, obj: Any) -&gt; Optional[Text]:
    &quot;&quot;&quot;Get a signature for a callable.&quot;&quot;&quot;
    try:
        _signature = str(signature(obj)) + &quot;:&quot;
    except ValueError:
        _signature = &quot;(...)&quot;
    except TypeError:
        return None

    source_filename: Optional[str] = None
    try:
        source_filename = getfile(obj)
    except (OSError, TypeError):
        # OSError is raised if obj has no source file, e.g. when defined in REPL.
        pass

    callable_name = Text(name, style=&quot;inspect.callable&quot;)
    if source_filename:
        callable_name.stylize(f&quot;link file://{source_filename}&quot;)
    signature_text = self.highlighter(_signature)

    qualname = name or getattr(obj, &quot;__qualname__&quot;, name)

    # If obj is a module, there may be classes (which are callable) to display
    if inspect.isclass(obj):
        prefix = &quot;class&quot;
    elif inspect.iscoroutinefunction(obj):
        prefix = &quot;async def&quot;
    else:
        prefix = &quot;def&quot;

    qual_signature = Text.assemble(
        (f&quot;{prefix} &quot;, f&quot;inspect.{prefix.replace(&#39; &#39;, &#39;_&#39;)}&quot;),
        (qualname, &quot;inspect.callable&quot;),
        signature_text,
    )

    return qual_signature

def _render(self) -&gt; Iterable[RenderableType]:
    &quot;&quot;&quot;Render object.&quot;&quot;&quot;

    def sort_items(item: Tuple[str, Any]) -&gt; Tuple[bool, str]:
        key, (_error, value) = item
        return (callable(value), key.strip(&quot;_&quot;).lower())

    def safe_getattr(attr_name: str) -&gt; Tuple[Any, Any]:
        &quot;&quot;&quot;Get attribute or any exception.&quot;&quot;&quot;
        try:
            return (None, getattr(obj, attr_name))
        except Exception as error:
            return (error, None)

    obj = self.obj
    keys = dir(obj)
    total_items = len(keys)
    if not self.dunder:
        keys = [key for key in keys if not key.startswith(&quot;__&quot;)]
    if not self.private:
        keys = [key for key in keys if not key.startswith(&quot;_&quot;)]
    not_shown_count = total_items - len(keys)
    items = [(key, safe_getattr(key)) for key in keys]
    if self.sort:
        items.sort(key=sort_items)

    items_table = Table.grid(padding=(0, 1), expand=False)
    items_table.add_column(justify=&quot;right&quot;)
    add_row = items_table.add_row
    highlighter = self.highlighter

    if callable(obj):
        signature = self._get_signature(&quot;&quot;, obj)
        if signature is not None:
            yield signature
            yield &quot;&quot;

    if self.docs:
        _doc = self._get_formatted_doc(obj)
        if _doc is not None:
            doc_text = Text(_doc, style=&quot;inspect.help&quot;)
            doc_text = highlighter(doc_text)
            yield doc_text
            yield &quot;&quot;

    if self.value and not (isclass(obj) or callable(obj) or ismodule(obj)):
        yield Panel(
            Pretty(obj, indent_guides=True, max_length=10, max_string=60),
            border_style=&quot;inspect.value.border&quot;,
        )
        yield &quot;&quot;

    for key, (error, value) in items:
        key_text = Text.assemble(
            (
                key,
                &quot;inspect.attr.dunder&quot; if key.startswith(&quot;__&quot;) else &quot;inspect.attr&quot;,
            ),
            (&quot; =&quot;, &quot;inspect.equals&quot;),
        )
        if error is not None:
            warning = key_text.copy()
            warning.stylize(&quot;inspect.error&quot;)
            add_row(warning, highlighter(repr(error)))
            continue

        if callable(value):
            if not self.methods:
                continue

            _signature_text = self._get_signature(key, value)
            if _signature_text is None:
                add_row(key_text, Pretty(value, highlighter=highlighter))
            else:
                if self.docs:
                    docs = self._get_formatted_doc(value)
                    if docs is not None:
                        _signature_text.append(&quot;\n&quot; if &quot;\n&quot; in docs else &quot; &quot;)
                        doc = highlighter(docs)
                        doc.stylize(&quot;inspect.doc&quot;)
                        _signature_text.append(doc)

                add_row(key_text, _signature_text)
        else:
            add_row(key_text, Pretty(value, highlighter=highlighter))
    if items_table.row_count:
        yield items_table
    elif not_shown_count:
        yield Text.from_markup(
            f&quot;[b cyan]{not_shown_count}[/][i] attribute(s) not shown.[/i] &quot;
            f&quot;Run [b][magenta]inspect[/]([not b]inspect[/])[/b] for options.&quot;
        )

def _get_formatted_doc(self, object_: Any) -&gt; Optional[str]:
    &quot;&quot;&quot;
    Extract the docstring of an object, process it and returns it.
    The processing consists in cleaning up the docstring&#39;s indentation,
    taking only its 1st paragraph if `self.help` is not True,
    and escape its control codes.

    Args:
        object_ (Any): the object to get the docstring from.

    Returns:
        Optional[str]: the processed docstring, or None if no docstring was found.
    &quot;&quot;&quot;
    docs = getdoc(object_)
    if docs is None:
        return None
    docs = cleandoc(docs).strip()
    if not self.help:
        docs = _first_paragraph(docs)
    return escape_control_codes(docs)
</pre></div>
</div>
<p>def get_object_types_mro(obj: Union[object, Type[Any]]) -&gt; Tuple[type, …]:
“””Returns the MRO of an object’s class, or of the object itself if it’s a class.”””
if not hasattr(obj, “<strong>mro</strong>”):
# N.B. we cannot use <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">type(obj)</span> <span class="pre">is</span> <span class="pre">type</span></code> here because it doesn’t work with
# some types of classes, such as the ones that use abc.ABCMeta.
obj = type(obj)
return getattr(obj, “<strong>mro</strong>”, ())</p>
<p>def get_object_types_mro_as_strings(obj: object) -&gt; Collection[str]:
“””
Returns the MRO of an object’s class as full qualified names, or of the object itself if it’s a class.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Examples:
    `object_types_mro_as_strings(JSONDecoder)` will return `[&#39;json.decoder.JSONDecoder&#39;, &#39;builtins.object&#39;]`
&quot;&quot;&quot;
return [
    f&#39;{getattr(type_, &quot;__module__&quot;, &quot;&quot;)}.{getattr(type_, &quot;__qualname__&quot;, &quot;&quot;)}&#39;
    for type_ in get_object_types_mro(obj)
]
</pre></div>
</div>
<p>def is_object_one_of_types(
obj: object, fully_qualified_types_names: Collection[str]
) -&gt; bool:
“””
Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given object’s class (or the object itself, if it’s a class) has one of the
fully qualified names in its MRO.
“””
for type_name in get_object_types_mro_as_strings(obj):
if type_name in fully_qualified_types_names:
return True
return False</p>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Adam Worsnip.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>