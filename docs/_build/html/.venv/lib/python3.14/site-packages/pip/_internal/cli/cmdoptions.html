

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The following comment should be removed at some point in the future. &mdash; Retrogue 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/custom.css?v=a6a68382" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/fonts.css?v=5583d106" />

  
      <script src="../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../_static/documentation_options.js?v=d45e8c67"></script>
      <script src="../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../index.html" class="icon icon-home">
            Retrogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">Retrogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">The following comment should be removed at some point in the future.</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../_sources/.venv/lib/python3.14/site-packages/pip/_internal/cli/cmdoptions.py.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>“””
shared options and groups</p>
<p>The principle here is to define options once, but <em>not</em> instantiate them
globally. One reason being that options with action=’append’ can carry state
between parses. pip parses general options twice internally, and shouldn’t
pass on state. To be consistent, all options will follow this design.
“””</p>
<section id="the-following-comment-should-be-removed-at-some-point-in-the-future">
<h1>The following comment should be removed at some point in the future.<a class="headerlink" href="#the-following-comment-should-be-removed-at-some-point-in-the-future" title="Link to this heading"></a></h1>
</section>
<section id="mypy-strict-optional-false">
<h1>mypy: strict-optional=False<a class="headerlink" href="#mypy-strict-optional-false" title="Link to this heading"></a></h1>
<p>from <strong>future</strong> import annotations</p>
<p>import logging
import os
import pathlib
import textwrap
from functools import partial
from optparse import SUPPRESS_HELP, Option, OptionGroup, OptionParser, Values
from textwrap import dedent
from typing import Any, Callable</p>
<p>from pip._vendor.packaging.utils import canonicalize_name</p>
<p>from pip._internal.cli.parser import ConfigOptionParser
from pip._internal.exceptions import CommandError
from pip._internal.locations import USER_CACHE_DIR, get_src_prefix
from pip._internal.models.format_control import FormatControl
from pip._internal.models.index import PyPI
from pip._internal.models.target_python import TargetPython
from pip._internal.utils.hashes import STRONG_HASHES
from pip._internal.utils.misc import strtobool</p>
<p>logger = logging.getLogger(<strong>name</strong>)</p>
<p>def raise_option_error(parser: OptionParser, option: Option, msg: str) -&gt; None:
“””
Raise an option parsing error using parser.error().</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Args:
  parser: an OptionParser instance.
  option: an Option instance.
  msg: the error text.
&quot;&quot;&quot;
msg = f&quot;{option} error: {msg}&quot;
msg = textwrap.fill(&quot; &quot;.join(msg.split()))
parser.error(msg)
</pre></div>
</div>
<p>def make_option_group(group: dict[str, Any], parser: ConfigOptionParser) -&gt; OptionGroup:
“””
Return an OptionGroup object
group  – assumed to be dict with ‘name’ and ‘options’ keys
parser – an optparse Parser
“””
option_group = OptionGroup(parser, group[“name”])
for option in group[“options”]:
option_group.add_option(option())
return option_group</p>
<p>def check_dist_restriction(options: Values, check_target: bool = False) -&gt; None:
“””Function for determining if custom platform options are allowed.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>:param options: The OptionParser options.
:param check_target: Whether or not to check if --target is being used.
&quot;&quot;&quot;
dist_restriction_set = any(
    [
        options.python_version,
        options.platforms,
        options.abis,
        options.implementation,
    ]
)

binary_only = FormatControl(set(), {&quot;:all:&quot;})
sdist_dependencies_allowed = (
    options.format_control != binary_only and not options.ignore_dependencies
)

# Installations or downloads using dist restrictions must not combine
# source distributions and dist-specific wheels, as they are not
# guaranteed to be locally compatible.
if dist_restriction_set and sdist_dependencies_allowed:
    raise CommandError(
        &quot;When restricting platform and interpreter constraints using &quot;
        &quot;--python-version, --platform, --abi, or --implementation, &quot;
        &quot;either --no-deps must be set, or --only-binary=:all: must be &quot;
        &quot;set and --no-binary must not be set (or must be set to &quot;
        &quot;:none:).&quot;
    )

if check_target:
    if not options.dry_run and dist_restriction_set and not options.target_dir:
        raise CommandError(
            &quot;Can not use any platform or abi specific options unless &quot;
            &quot;installing via &#39;--target&#39; or using &#39;--dry-run&#39;&quot;
        )
</pre></div>
</div>
<p>def check_build_constraints(options: Values) -&gt; None:
“””Function for validating build constraints options.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>:param options: The OptionParser options.
&quot;&quot;&quot;
if hasattr(options, &quot;build_constraints&quot;) and options.build_constraints:
    if not options.build_isolation:
        raise CommandError(
            &quot;--build-constraint cannot be used with --no-build-isolation.&quot;
        )

    # Import here to avoid circular imports
    from pip._internal.network.session import PipSession
    from pip._internal.req.req_file import get_file_content

    # Eagerly check build constraints file contents
    # is valid so that we don&#39;t fail in when trying
    # to check constraints in isolated build process
    with PipSession() as session:
        for constraint_file in options.build_constraints:
            get_file_content(constraint_file, session)
</pre></div>
</div>
<p>def _path_option_check(option: Option, opt: str, value: str) -&gt; str:
return os.path.expanduser(value)</p>
<p>def _package_name_option_check(option: Option, opt: str, value: str) -&gt; str:
return canonicalize_name(value)</p>
<p>class PipOption(Option):
TYPES = Option.TYPES + (“path”, “package_name”)
TYPE_CHECKER = Option.TYPE_CHECKER.copy()
TYPE_CHECKER[“package_name”] = _package_name_option_check
TYPE_CHECKER[“path”] = _path_option_check</p>
<p>###########</p>
</section>
<section id="options">
<h1>options<a class="headerlink" href="#options" title="Link to this heading"></a></h1>
<p>###########</p>
<p>help_: Callable[…, Option] = partial(
Option,
“-h”,
“–help”,
dest=”help”,
action=”help”,
help=”Show help.”,
)</p>
<p>debug_mode: Callable[…, Option] = partial(
Option,
“–debug”,
dest=”debug_mode”,
action=”store_true”,
default=False,
help=(
“Let unhandled exceptions propagate outside the main subroutine, “
“instead of logging them to stderr.”
),
)</p>
<p>isolated_mode: Callable[…, Option] = partial(
Option,
“–isolated”,
dest=”isolated_mode”,
action=”store_true”,
default=False,
help=(
“Run pip in an isolated mode, ignoring environment variables and user “
“configuration.”
),
)</p>
<p>require_virtualenv: Callable[…, Option] = partial(
Option,
“–require-virtualenv”,
“–require-venv”,
dest=”require_venv”,
action=”store_true”,
default=False,
help=(
“Allow pip to only run in a virtual environment; exit with an error otherwise.”
),
)</p>
<p>override_externally_managed: Callable[…, Option] = partial(
Option,
“–break-system-packages”,
dest=”override_externally_managed”,
action=”store_true”,
help=”Allow pip to modify an EXTERNALLY-MANAGED Python installation”,
)</p>
<p>python: Callable[…, Option] = partial(
Option,
“–python”,
dest=”python”,
help=”Run pip with the specified Python interpreter.”,
)</p>
<p>verbose: Callable[…, Option] = partial(
Option,
“-v”,
“–verbose”,
dest=”verbose”,
action=”count”,
default=0,
help=”Give more output. Option is additive, and can be used up to 3 times.”,
)</p>
<p>no_color: Callable[…, Option] = partial(
Option,
“–no-color”,
dest=”no_color”,
action=”store_true”,
default=False,
help=”Suppress colored output.”,
)</p>
<p>version: Callable[…, Option] = partial(
Option,
“-V”,
“–version”,
dest=”version”,
action=”store_true”,
help=”Show version and exit.”,
)</p>
<p>quiet: Callable[…, Option] = partial(
Option,
“-q”,
“–quiet”,
dest=”quiet”,
action=”count”,
default=0,
help=(
“Give less output. Option is additive, and can be used up to 3”
“ times (corresponding to WARNING, ERROR, and CRITICAL logging”
“ levels).”
),
)</p>
<p>progress_bar: Callable[…, Option] = partial(
Option,
“–progress-bar”,
dest=”progress_bar”,
type=”choice”,
choices=[“auto”, “on”, “off”, “raw”],
default=”auto”,
help=(
“Specify whether the progress bar should be used. In ‘auto’”
“ mode, –quiet will suppress all progress bars.”
“ [auto, on, off, raw] (default: auto)”
),
)</p>
<p>log: Callable[…, Option] = partial(
PipOption,
“–log”,
“–log-file”,
“–local-log”,
dest=”log”,
metavar=”path”,
type=”path”,
help=”Path to a verbose appending log.”,
)</p>
<p>no_input: Callable[…, Option] = partial(
Option,
# Don’t ask for input
“–no-input”,
dest=”no_input”,
action=”store_true”,
default=False,
help=”Disable prompting for input.”,
)</p>
<p>keyring_provider: Callable[…, Option] = partial(
Option,
“–keyring-provider”,
dest=”keyring_provider”,
choices=[“auto”, “disabled”, “import”, “subprocess”],
default=”auto”,
help=(
“Enable the credential lookup via the keyring library if user input is allowed.”
“ Specify which mechanism to use [auto, disabled, import, subprocess].”
“ (default: %default)”
),
)</p>
<p>proxy: Callable[…, Option] = partial(
Option,
“–proxy”,
dest=”proxy”,
type=”str”,
default=””,
help=”Specify a proxy in the form scheme://[user:passwd&#64;]proxy.server:port.”,
)</p>
<p>retries: Callable[…, Option] = partial(
Option,
“–retries”,
dest=”retries”,
type=”int”,
default=5,
help=”Maximum attempts to establish a new HTTP connection. (default: %default)”,
)</p>
<p>resume_retries: Callable[…, Option] = partial(
Option,
“–resume-retries”,
dest=”resume_retries”,
type=”int”,
default=5,
help=”Maximum attempts to resume or restart an incomplete download. “
“(default: %default)”,
)</p>
<p>timeout: Callable[…, Option] = partial(
Option,
“–timeout”,
“–default-timeout”,
metavar=”sec”,
dest=”timeout”,
type=”float”,
default=15,
help=”Set the socket timeout (default %default seconds).”,
)</p>
<p>def exists_action() -&gt; Option:
return Option(
# Option when path already exist
“–exists-action”,
dest=”exists_action”,
type=”choice”,
choices=[“s”, “i”, “w”, “b”, “a”],
default=[],
action=”append”,
metavar=”action”,
help=”Default action when a path already exists: “
“(s)witch, (i)gnore, (w)ipe, (b)ackup, (a)bort.”,
)</p>
<p>cert: Callable[…, Option] = partial(
PipOption,
“–cert”,
dest=”cert”,
type=”path”,
metavar=”path”,
help=(
“Path to PEM-encoded CA certificate bundle. “
“If provided, overrides the default. “
“See ‘SSL Certificate Verification’ in pip documentation “
“for more information.”
),
)</p>
<p>client_cert: Callable[…, Option] = partial(
PipOption,
“–client-cert”,
dest=”client_cert”,
type=”path”,
default=None,
metavar=”path”,
help=”Path to SSL client certificate, a single file containing the “
“private key and the certificate in PEM format.”,
)</p>
<p>index_url: Callable[…, Option] = partial(
Option,
“-i”,
“–index-url”,
“–pypi-url”,
dest=”index_url”,
metavar=”URL”,
default=PyPI.simple_url,
help=”Base URL of the Python Package Index (default %default). “
“This should point to a repository compliant with PEP 503 “
“(the simple repository API) or a local directory laid out “
“in the same format.”,
)</p>
<p>def extra_index_url() -&gt; Option:
return Option(
“–extra-index-url”,
dest=”extra_index_urls”,
metavar=”URL”,
action=”append”,
default=[],
help=”Extra URLs of package indexes to use in addition to “
“–index-url. Should follow the same rules as “
“–index-url.”,
)</p>
<p>no_index: Callable[…, Option] = partial(
Option,
“–no-index”,
dest=”no_index”,
action=”store_true”,
default=False,
help=”Ignore package index (only looking at –find-links URLs instead).”,
)</p>
<p>def find_links() -&gt; Option:
return Option(
“-f”,
“–find-links”,
dest=”find_links”,
action=”append”,
default=[],
metavar=”url”,
help=”If a URL or path to an html file, then parse for links to “
“archives such as sdist (.tar.gz) or wheel (.whl) files. “
“If a local path or file:// URL that’s a directory, “
“then look for archives in the directory listing. “
“Links to VCS project URLs are not supported.”,
)</p>
<p>def trusted_host() -&gt; Option:
return Option(
“–trusted-host”,
dest=”trusted_hosts”,
action=”append”,
metavar=”HOSTNAME”,
default=[],
help=”Mark this host or host:port pair as trusted, even though it “
“does not have valid or any HTTPS.”,
)</p>
<p>def constraints() -&gt; Option:
return Option(
“-c”,
“–constraint”,
dest=”constraints”,
action=”append”,
default=[],
metavar=”file”,
help=”Constrain versions using the given constraints file. “
“This option can be used multiple times.”,
)</p>
<p>def build_constraints() -&gt; Option:
return Option(
“–build-constraint”,
dest=”build_constraints”,
action=”append”,
type=”str”,
default=[],
metavar=”file”,
help=(
“Constrain build dependencies using the given constraints file. “
“This option can be used multiple times.”
),
)</p>
<p>def requirements() -&gt; Option:
return Option(
“-r”,
“–requirement”,
dest=”requirements”,
action=”append”,
default=[],
metavar=”file”,
help=”Install from the given requirements file. “
“This option can be used multiple times.”,
)</p>
<p>def editable() -&gt; Option:
return Option(
“-e”,
“–editable”,
dest=”editables”,
action=”append”,
default=[],
metavar=”path/url”,
help=(
“Install a project in editable mode (i.e. setuptools “
‘“develop mode”) from a local project path or a VCS url.’
),
)</p>
<p>def _handle_src(option: Option, opt_str: str, value: str, parser: OptionParser) -&gt; None:
value = os.path.abspath(value)
setattr(parser.values, option.dest, value)</p>
<p>src: Callable[…, Option] = partial(
PipOption,
“–src”,
“–source”,
“–source-dir”,
“–source-directory”,
dest=”src_dir”,
type=”path”,
metavar=”dir”,
default=get_src_prefix(),
action=”callback”,
callback=_handle_src,
help=”Directory to check out editable projects into. “
‘The default in a virtualenv is “<venv path>/src”. ‘
‘The default for global installs is “<current dir>/src”.’,
)</p>
<p>def _get_format_control(values: Values, option: Option) -&gt; Any:
“””Get a format_control object.”””
return getattr(values, option.dest)</p>
<p>def _handle_no_binary(
option: Option, opt_str: str, value: str, parser: OptionParser
) -&gt; None:
existing = _get_format_control(parser.values, option)
FormatControl.handle_mutual_excludes(
value,
existing.no_binary,
existing.only_binary,
)</p>
<p>def _handle_only_binary(
option: Option, opt_str: str, value: str, parser: OptionParser
) -&gt; None:
existing = _get_format_control(parser.values, option)
FormatControl.handle_mutual_excludes(
value,
existing.only_binary,
existing.no_binary,
)</p>
<p>def no_binary() -&gt; Option:
format_control = FormatControl(set(), set())
return Option(
“–no-binary”,
dest=”format_control”,
action=”callback”,
callback=_handle_no_binary,
type=”str”,
default=format_control,
help=”Do not use binary packages. Can be supplied multiple times, and “
‘each time adds to the existing value. Accepts either “:all:” to ‘
‘disable all binary packages, “:none:” to empty the set (notice ‘
“the colons), or one or more package names with commas between “
“them (no colons). Note that some packages are tricky to compile “
“and may fail to install when this option is used on them.”,
)</p>
<p>def only_binary() -&gt; Option:
format_control = FormatControl(set(), set())
return Option(
“–only-binary”,
dest=”format_control”,
action=”callback”,
callback=_handle_only_binary,
type=”str”,
default=format_control,
help=”Do not use source packages. Can be supplied multiple times, and “
‘each time adds to the existing value. Accepts either “:all:” to ‘
‘disable all source packages, “:none:” to empty the set, or one ‘
“or more package names with commas between them. Packages “
“without binary distributions will fail to install when this “
“option is used on them.”,
)</p>
<p>platforms: Callable[…, Option] = partial(
Option,
“–platform”,
dest=”platforms”,
metavar=”platform”,
action=”append”,
default=None,
help=(
“Only use wheels compatible with <platform>. Defaults to the “
“platform of the running system. Use this option multiple times to “
“specify multiple platforms supported by the target interpreter.”
),
)</p>
</section>
<section id="this-was-made-a-separate-function-for-unit-testing-purposes">
<h1>This was made a separate function for unit-testing purposes.<a class="headerlink" href="#this-was-made-a-separate-function-for-unit-testing-purposes" title="Link to this heading"></a></h1>
<p>def _convert_python_version(value: str) -&gt; tuple[tuple[int, …], str | None]:
“””
Convert a version string like “3”, “37”, or “3.7.3” into a tuple of ints.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>:return: A 2-tuple (version_info, error_msg), where `error_msg` is
    non-None if and only if there was a parsing error.
&quot;&quot;&quot;
if not value:
    # The empty string is the same as not providing a value.
    return (None, None)

parts = value.split(&quot;.&quot;)
if len(parts) &gt; 3:
    return ((), &quot;at most three version parts are allowed&quot;)

if len(parts) == 1:
    # Then we are in the case of &quot;3&quot; or &quot;37&quot;.
    value = parts[0]
    if len(value) &gt; 1:
        parts = [value[0], value[1:]]

try:
    version_info = tuple(int(part) for part in parts)
except ValueError:
    return ((), &quot;each version part must be an integer&quot;)

return (version_info, None)
</pre></div>
</div>
<p>def _handle_python_version(
option: Option, opt_str: str, value: str, parser: OptionParser
) -&gt; None:
“””
Handle a provided –python-version value.
“””
version_info, error_msg = _convert_python_version(value)
if error_msg is not None:
msg = f”invalid –python-version value: {value!r}: {error_msg}”
raise_option_error(parser, option=option, msg=msg)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>parser.values.python_version = version_info
</pre></div>
</div>
<p>python_version: Callable[…, Option] = partial(
Option,
“–python-version”,
dest=”python_version”,
metavar=”python_version”,
action=”callback”,
callback=_handle_python_version,
type=”str”,
default=None,
help=dedent(
“””<br />
The Python interpreter version to use for wheel and “Requires-Python”
compatibility checks. Defaults to a version derived from the running
interpreter. The version can be specified using up to three dot-separated
integers (e.g. “3” for 3.0.0, “3.7” for 3.7.0, or “3.7.3”). A major-minor
version can also be given as a string without dots (e.g. “37” for 3.7.0).
“””
),
)</p>
<p>implementation: Callable[…, Option] = partial(
Option,
“–implementation”,
dest=”implementation”,
metavar=”implementation”,
default=None,
help=(
“Only use wheels compatible with Python “
“implementation <implementation>, e.g. ‘pp’, ‘jy’, ‘cp’, “
“ or ‘ip’. If not specified, then the current “
“interpreter implementation is used.  Use ‘py’ to force “
“implementation-agnostic wheels.”
),
)</p>
<p>abis: Callable[…, Option] = partial(
Option,
“–abi”,
dest=”abis”,
metavar=”abi”,
action=”append”,
default=None,
help=(
“Only use wheels compatible with Python abi <abi>, e.g. ‘pypy_41’. “
“If not specified, then the current interpreter abi tag is used. “
“Use this option multiple times to specify multiple abis supported “
“by the target interpreter. Generally you will need to specify “
“–implementation, –platform, and –python-version when using this “
“option.”
),
)</p>
<p>def add_target_python_options(cmd_opts: OptionGroup) -&gt; None:
cmd_opts.add_option(platforms())
cmd_opts.add_option(python_version())
cmd_opts.add_option(implementation())
cmd_opts.add_option(abis())</p>
<p>def make_target_python(options: Values) -&gt; TargetPython:
target_python = TargetPython(
platforms=options.platforms,
py_version_info=options.python_version,
abis=options.abis,
implementation=options.implementation,
)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>return target_python
</pre></div>
</div>
<p>def prefer_binary() -&gt; Option:
return Option(
“–prefer-binary”,
dest=”prefer_binary”,
action=”store_true”,
default=False,
help=(
“Prefer binary packages over source packages, even if the “
“source packages are newer.”
),
)</p>
<p>cache_dir: Callable[…, Option] = partial(
PipOption,
“–cache-dir”,
dest=”cache_dir”,
default=USER_CACHE_DIR,
metavar=”dir”,
type=”path”,
help=”Store the cache data in <dir>.”,
)</p>
<p>def _handle_no_cache_dir(
option: Option, opt: str, value: str, parser: OptionParser
) -&gt; None:
“””
Process a value provided for the –no-cache-dir option.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>This is an optparse.Option callback for the --no-cache-dir option.
&quot;&quot;&quot;
# The value argument will be None if --no-cache-dir is passed via the
# command-line, since the option doesn&#39;t accept arguments.  However,
# the value can be non-None if the option is triggered e.g. by an
# environment variable, like PIP_NO_CACHE_DIR=true.
if value is not None:
    # Then parse the string value to get argument error-checking.
    try:
        strtobool(value)
    except ValueError as exc:
        raise_option_error(parser, option=option, msg=str(exc))

# Originally, setting PIP_NO_CACHE_DIR to a value that strtobool()
# converted to 0 (like &quot;false&quot; or &quot;no&quot;) caused cache_dir to be disabled
# rather than enabled (logic would say the latter).  Thus, we disable
# the cache directory not just on values that parse to True, but (for
# backwards compatibility reasons) also on values that parse to False.
# In other words, always set it to False if the option is provided in
# some (valid) form.
parser.values.cache_dir = False
</pre></div>
</div>
<p>no_cache: Callable[…, Option] = partial(
Option,
“–no-cache-dir”,
dest=”cache_dir”,
action=”callback”,
callback=_handle_no_cache_dir,
help=”Disable the cache.”,
)</p>
<p>no_deps: Callable[…, Option] = partial(
Option,
“–no-deps”,
“–no-dependencies”,
dest=”ignore_dependencies”,
action=”store_true”,
default=False,
help=”Don’t install package dependencies.”,
)</p>
<p>def _handle_dependency_group(
option: Option, opt: str, value: str, parser: OptionParser
) -&gt; None:
“””
Process a value provided for the –group option.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Splits on the rightmost &quot;:&quot;, and validates that the path (if present) ends
in `pyproject.toml`. Defaults the path to `pyproject.toml` when one is not given.

`:` cannot appear in dependency group names, so this is a safe and simple parse.

This is an optparse.Option callback for the dependency_groups option.
&quot;&quot;&quot;
path, sep, groupname = value.rpartition(&quot;:&quot;)
if not sep:
    path = &quot;pyproject.toml&quot;
else:
    # check for &#39;pyproject.toml&#39; filenames using pathlib
    if pathlib.PurePath(path).name != &quot;pyproject.toml&quot;:
        msg = &quot;group paths use &#39;pyproject.toml&#39; filenames&quot;
        raise_option_error(parser, option=option, msg=msg)

parser.values.dependency_groups.append((path, groupname))
</pre></div>
</div>
<p>dependency_groups: Callable[…, Option] = partial(
Option,
“–group”,
dest=”dependency_groups”,
default=[],
type=str,
action=”callback”,
callback=_handle_dependency_group,
metavar=”[path:]group”,
help=’Install a named dependency-group from a “pyproject.toml” file. ‘
‘If a path is given, the name of the file must be “pyproject.toml”. ‘
‘Defaults to using “pyproject.toml” in the current directory.’,
)</p>
<p>ignore_requires_python: Callable[…, Option] = partial(
Option,
“–ignore-requires-python”,
dest=”ignore_requires_python”,
action=”store_true”,
help=”Ignore the Requires-Python information.”,
)</p>
<p>no_build_isolation: Callable[…, Option] = partial(
Option,
“–no-build-isolation”,
dest=”build_isolation”,
action=”store_false”,
default=True,
help=”Disable isolation when building a modern source distribution. “
“Build dependencies specified by PEP 518 must be already installed “
“if this option is used.”,
)</p>
<p>check_build_deps: Callable[…, Option] = partial(
Option,
“–check-build-dependencies”,
dest=”check_build_deps”,
action=”store_true”,
default=False,
help=”Check the build dependencies.”,
)</p>
<p>use_pep517: Any = partial(
Option,
“–use-pep517”,
dest=”use_pep517”,
action=”store_true”,
default=True,
help=SUPPRESS_HELP,
)</p>
<p>def _handle_config_settings(
option: Option, opt_str: str, value: str, parser: OptionParser
) -&gt; None:
key, sep, val = value.partition(“=”)
if sep != “=”:
parser.error(f”Arguments to {opt_str} must be of the form KEY=VAL”)
dest = getattr(parser.values, option.dest)
if dest is None:
dest = {}
setattr(parser.values, option.dest, dest)
if key in dest:
if isinstance(dest[key], list):
dest[key].append(val)
else:
dest[key] = [dest[key], val]
else:
dest[key] = val</p>
<p>config_settings: Callable[…, Option] = partial(
Option,
“-C”,
“–config-settings”,
dest=”config_settings”,
type=str,
action=”callback”,
callback=_handle_config_settings,
metavar=”settings”,
help=”Configuration settings to be passed to the build backend. “
“Settings take the form KEY=VALUE. Use multiple –config-settings options “
“to pass multiple keys to the backend.”,
)</p>
<p>no_clean: Callable[…, Option] = partial(
Option,
“–no-clean”,
action=”store_true”,
default=False,
help=”Don’t clean up build directories.”,
)</p>
<p>pre: Callable[…, Option] = partial(
Option,
“–pre”,
action=”store_true”,
default=False,
help=”Include pre-release and development versions. By default, “
“pip only finds stable versions.”,
)</p>
<p>json: Callable[…, Option] = partial(
Option,
“–json”,
action=”store_true”,
default=False,
help=”Output data in a machine-readable JSON format.”,
)</p>
<p>disable_pip_version_check: Callable[…, Option] = partial(
Option,
“–disable-pip-version-check”,
dest=”disable_pip_version_check”,
action=”store_true”,
default=False,
help=”Don’t periodically check PyPI to determine whether a new version “
“of pip is available for download. Implied with –no-index.”,
)</p>
<p>root_user_action: Callable[…, Option] = partial(
Option,
“–root-user-action”,
dest=”root_user_action”,
default=”warn”,
choices=[“warn”, “ignore”],
help=”Action if pip is run as a root user [warn, ignore] (default: warn)”,
)</p>
<p>def _handle_merge_hash(
option: Option, opt_str: str, value: str, parser: OptionParser
) -&gt; None:
“””Given a value spelled “algo:digest”, append the digest to a list
pointed to in a dict by the algo name.”””
if not parser.values.hashes:
parser.values.hashes = {}
try:
algo, digest = value.split(“:”, 1)
except ValueError:
parser.error(
f”Arguments to {opt_str} must be a hash name “
“followed by a value, like –hash=sha256:”
“abcde…”
)
if algo not in STRONG_HASHES:
parser.error(
“Allowed hash algorithms for {} are {}.”.format(
opt_str, “, “.join(STRONG_HASHES)
)
)
parser.values.hashes.setdefault(algo, []).append(digest)</p>
<p>hash: Callable[…, Option] = partial(
Option,
“–hash”,
# Hash values eventually end up in InstallRequirement.hashes due to
# <strong>dict</strong> copying in process_line().
dest=”hashes”,
action=”callback”,
callback=_handle_merge_hash,
type=”string”,
help=”Verify that the package’s archive matches this “
“hash before installing. Example: –hash=sha256:abcdef…”,
)</p>
<p>require_hashes: Callable[…, Option] = partial(
Option,
“–require-hashes”,
dest=”require_hashes”,
action=”store_true”,
default=False,
help=”Require a hash to check each requirement against, for “
“repeatable installs. This option is implied when any package in a “
“requirements file has a –hash option.”,
)</p>
<p>list_path: Callable[…, Option] = partial(
PipOption,
“–path”,
dest=”path”,
type=”path”,
action=”append”,
help=”Restrict to the specified installation path for listing “
“packages (can be used multiple times).”,
)</p>
<p>def check_list_path_option(options: Values) -&gt; None:
if options.path and (options.user or options.local):
raise CommandError(“Cannot combine ‘–path’ with ‘–user’ or ‘–local’”)</p>
<p>list_exclude: Callable[…, Option] = partial(
PipOption,
“–exclude”,
dest=”excludes”,
action=”append”,
metavar=”package”,
type=”package_name”,
help=”Exclude specified package from the output”,
)</p>
<p>no_python_version_warning: Callable[…, Option] = partial(
Option,
“–no-python-version-warning”,
dest=”no_python_version_warning”,
action=”store_true”,
default=False,
help=SUPPRESS_HELP,  # No-op, a hold-over from the Python 2-&gt;3 transition.
)</p>
</section>
<section id="features-that-are-now-always-on-a-warning-is-printed-if-they-are-used">
<h1>Features that are now always on. A warning is printed if they are used.<a class="headerlink" href="#features-that-are-now-always-on-a-warning-is-printed-if-they-are-used" title="Link to this heading"></a></h1>
<p>ALWAYS_ENABLED_FEATURES = [
“truststore”,  # always on since 24.2
“no-binary-enable-wheel-cache”,  # always on since 23.1
]</p>
<p>use_new_feature: Callable[…, Option] = partial(
Option,
“–use-feature”,
dest=”features_enabled”,
metavar=”feature”,
action=”append”,
default=[],
choices=[
“fast-deps”,
“build-constraint”,
]
+ ALWAYS_ENABLED_FEATURES,
help=”Enable new functionality, that may be backward incompatible.”,
)</p>
<p>use_deprecated_feature: Callable[…, Option] = partial(
Option,
“–use-deprecated”,
dest=”deprecated_features_enabled”,
metavar=”feature”,
action=”append”,
default=[],
choices=[
“legacy-resolver”,
“legacy-certs”,
],
help=(“Enable deprecated functionality, that will be removed in the future.”),
)</p>
<p>##########</p>
</section>
<section id="groups">
<h1>groups<a class="headerlink" href="#groups" title="Link to this heading"></a></h1>
<p>##########</p>
<p>general_group: dict[str, Any] = {
“name”: “General Options”,
“options”: [
help_,
debug_mode,
isolated_mode,
require_virtualenv,
python,
verbose,
version,
quiet,
log,
no_input,
keyring_provider,
proxy,
retries,
timeout,
exists_action,
trusted_host,
cert,
client_cert,
cache_dir,
no_cache,
disable_pip_version_check,
no_color,
no_python_version_warning,
use_new_feature,
use_deprecated_feature,
resume_retries,
],
}</p>
<p>index_group: dict[str, Any] = {
“name”: “Package Index Options”,
“options”: [
index_url,
extra_index_url,
no_index,
find_links,
],
}</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Adam Worsnip.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>