

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; Retrogue 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/custom.css?v=a6a68382" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/fonts.css?v=5583d106" />

  
      <script src="../../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../../_static/documentation_options.js?v=d45e8c67"></script>
      <script src="../../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../../index.html" class="icon icon-home">
            Retrogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../../index.html">Retrogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../../_sources/.venv/lib/python3.14/site-packages/pip/_vendor/pygments/lexers/python.py.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>“””
pygments.lexers.python
~~~~~~~~~~~~~~~~~~~~~~</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Lexers for Python and related languages.

:copyright: Copyright 2006-2025 by the Pygments team, see AUTHORS.
:license: BSD, see LICENSE for details.
</pre></div>
</div>
<p>“””</p>
<p>import keyword</p>
<p>from pip._vendor.pygments.lexer import DelegatingLexer, RegexLexer, include, <br />
bygroups, using, default, words, combined, this
from pip._vendor.pygments.util import get_bool_opt, shebang_matches
from pip._vendor.pygments.token import Text, Comment, Operator, Keyword, Name, String, <br />
Number, Punctuation, Generic, Other, Error, Whitespace
from pip._vendor.pygments import unistring as uni</p>
<p><strong>all</strong> = [‘PythonLexer’, ‘PythonConsoleLexer’, ‘PythonTracebackLexer’,
‘Python2Lexer’, ‘Python2TracebackLexer’,
‘CythonLexer’, ‘DgLexer’, ‘NumPyLexer’]</p>
<p>class PythonLexer(RegexLexer):
“””
For Python source code (version 3.x).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. versionchanged:: 2.5
   This is now the default ``PythonLexer``.  It is still available as the
   alias ``Python3Lexer``.
&quot;&quot;&quot;

name = &#39;Python&#39;
url = &#39;https://www.python.org&#39;
aliases = [&#39;python&#39;, &#39;py&#39;, &#39;sage&#39;, &#39;python3&#39;, &#39;py3&#39;, &#39;bazel&#39;, &#39;starlark&#39;, &#39;pyi&#39;]
filenames = [
    &#39;*.py&#39;,
    &#39;*.pyw&#39;,
    # Type stubs
    &#39;*.pyi&#39;,
    # Jython
    &#39;*.jy&#39;,
    # Sage
    &#39;*.sage&#39;,
    # SCons
    &#39;*.sc&#39;,
    &#39;SConstruct&#39;,
    &#39;SConscript&#39;,
    # Skylark/Starlark (used by Bazel, Buck, and Pants)
    &#39;*.bzl&#39;,
    &#39;BUCK&#39;,
    &#39;BUILD&#39;,
    &#39;BUILD.bazel&#39;,
    &#39;WORKSPACE&#39;,
    # Twisted Application infrastructure
    &#39;*.tac&#39;,
]
mimetypes = [&#39;text/x-python&#39;, &#39;application/x-python&#39;,
             &#39;text/x-python3&#39;, &#39;application/x-python3&#39;]
version_added = &#39;0.10&#39;

uni_name = f&quot;[{uni.xid_start}][{uni.xid_continue}]*&quot;

def innerstring_rules(ttype):
    return [
        # the old style &#39;%s&#39; % (...) string formatting (still valid in Py3)
        (r&#39;%(\(\w+\))?[-#0 +]*([0-9]+|[*])?(\.([0-9]+|[*]))?&#39;
         &#39;[hlL]?[E-GXc-giorsaux%]&#39;, String.Interpol),
        # the new style &#39;{}&#39;.format(...) string formatting
        (r&#39;\{&#39;
         r&#39;((\w+)((\.\w+)|(\[[^\]]+\]))*)?&#39;  # field name
         r&#39;(\![sra])?&#39;                       # conversion
         r&#39;(\:(.?[&lt;&gt;=\^])?[-+ ]?#?0?(\d+)?,?(\.\d+)?[E-GXb-gnosx%]?)?&#39;
         r&#39;\}&#39;, String.Interpol),

        # backslashes, quotes and formatting signs must be parsed one at a time
        (r&#39;[^\\\&#39;&quot;%{\n]+&#39;, ttype),
        (r&#39;[\&#39;&quot;\\]&#39;, ttype),
        # unhandled string formatting sign
        (r&#39;%|(\{{1,2})&#39;, ttype)
        # newlines are an error (use &quot;nl&quot; state)
    ]

def fstring_rules(ttype):
    return [
        # Assuming that a &#39;}&#39; is the closing brace after format specifier.
        # Sadly, this means that we won&#39;t detect syntax error. But it&#39;s
        # more important to parse correct syntax correctly, than to
        # highlight invalid syntax.
        (r&#39;\}&#39;, String.Interpol),
        (r&#39;\{&#39;, String.Interpol, &#39;expr-inside-fstring&#39;),
        # backslashes, quotes and formatting signs must be parsed one at a time
        (r&#39;[^\\\&#39;&quot;{}\n]+&#39;, ttype),
        (r&#39;[\&#39;&quot;\\]&#39;, ttype),
        # newlines are an error (use &quot;nl&quot; state)
    ]

tokens = {
    &#39;root&#39;: [
        (r&#39;\n&#39;, Whitespace),
        (r&#39;^(\s*)([rRuUbB]{,2})(&quot;&quot;&quot;(?:.|\n)*?&quot;&quot;&quot;)&#39;,
         bygroups(Whitespace, String.Affix, String.Doc)),
        (r&quot;^(\s*)([rRuUbB]{,2})(&#39;&#39;&#39;(?:.|\n)*?&#39;&#39;&#39;)&quot;,
         bygroups(Whitespace, String.Affix, String.Doc)),
        (r&#39;\A#!.+$&#39;, Comment.Hashbang),
        (r&#39;#.*$&#39;, Comment.Single),
        (r&#39;\\\n&#39;, Text),
        (r&#39;\\&#39;, Text),
        include(&#39;keywords&#39;),
        include(&#39;soft-keywords&#39;),
        (r&#39;(def)((?:\s|\\\s)+)&#39;, bygroups(Keyword, Whitespace), &#39;funcname&#39;),
        (r&#39;(class)((?:\s|\\\s)+)&#39;, bygroups(Keyword, Whitespace), &#39;classname&#39;),
        (r&#39;(from)((?:\s|\\\s)+)&#39;, bygroups(Keyword.Namespace, Whitespace),
         &#39;fromimport&#39;),
        (r&#39;(import)((?:\s|\\\s)+)&#39;, bygroups(Keyword.Namespace, Whitespace),
         &#39;import&#39;),
        include(&#39;expr&#39;),
    ],
    &#39;expr&#39;: [
        # raw f-strings
        (&#39;(?i)(rf|fr)(&quot;&quot;&quot;)&#39;,
         bygroups(String.Affix, String.Double),
         combined(&#39;rfstringescape&#39;, &#39;tdqf&#39;)),
        (&quot;(?i)(rf|fr)(&#39;&#39;&#39;)&quot;,
         bygroups(String.Affix, String.Single),
         combined(&#39;rfstringescape&#39;, &#39;tsqf&#39;)),
        (&#39;(?i)(rf|fr)(&quot;)&#39;,
         bygroups(String.Affix, String.Double),
         combined(&#39;rfstringescape&#39;, &#39;dqf&#39;)),
        (&quot;(?i)(rf|fr)(&#39;)&quot;,
         bygroups(String.Affix, String.Single),
         combined(&#39;rfstringescape&#39;, &#39;sqf&#39;)),
        # non-raw f-strings
        (&#39;([fF])(&quot;&quot;&quot;)&#39;, bygroups(String.Affix, String.Double),
         combined(&#39;fstringescape&#39;, &#39;tdqf&#39;)),
        (&quot;([fF])(&#39;&#39;&#39;)&quot;, bygroups(String.Affix, String.Single),
         combined(&#39;fstringescape&#39;, &#39;tsqf&#39;)),
        (&#39;([fF])(&quot;)&#39;, bygroups(String.Affix, String.Double),
         combined(&#39;fstringescape&#39;, &#39;dqf&#39;)),
        (&quot;([fF])(&#39;)&quot;, bygroups(String.Affix, String.Single),
         combined(&#39;fstringescape&#39;, &#39;sqf&#39;)),
        # raw bytes and strings
        (&#39;(?i)(rb|br|r)(&quot;&quot;&quot;)&#39;,
         bygroups(String.Affix, String.Double), &#39;tdqs&#39;),
        (&quot;(?i)(rb|br|r)(&#39;&#39;&#39;)&quot;,
         bygroups(String.Affix, String.Single), &#39;tsqs&#39;),
        (&#39;(?i)(rb|br|r)(&quot;)&#39;,
         bygroups(String.Affix, String.Double), &#39;dqs&#39;),
        (&quot;(?i)(rb|br|r)(&#39;)&quot;,
         bygroups(String.Affix, String.Single), &#39;sqs&#39;),
        # non-raw strings
        (&#39;([uU]?)(&quot;&quot;&quot;)&#39;, bygroups(String.Affix, String.Double),
         combined(&#39;stringescape&#39;, &#39;tdqs&#39;)),
        (&quot;([uU]?)(&#39;&#39;&#39;)&quot;, bygroups(String.Affix, String.Single),
         combined(&#39;stringescape&#39;, &#39;tsqs&#39;)),
        (&#39;([uU]?)(&quot;)&#39;, bygroups(String.Affix, String.Double),
         combined(&#39;stringescape&#39;, &#39;dqs&#39;)),
        (&quot;([uU]?)(&#39;)&quot;, bygroups(String.Affix, String.Single),
         combined(&#39;stringescape&#39;, &#39;sqs&#39;)),
        # non-raw bytes
        (&#39;([bB])(&quot;&quot;&quot;)&#39;, bygroups(String.Affix, String.Double),
         combined(&#39;bytesescape&#39;, &#39;tdqs&#39;)),
        (&quot;([bB])(&#39;&#39;&#39;)&quot;, bygroups(String.Affix, String.Single),
         combined(&#39;bytesescape&#39;, &#39;tsqs&#39;)),
        (&#39;([bB])(&quot;)&#39;, bygroups(String.Affix, String.Double),
         combined(&#39;bytesescape&#39;, &#39;dqs&#39;)),
        (&quot;([bB])(&#39;)&quot;, bygroups(String.Affix, String.Single),
         combined(&#39;bytesescape&#39;, &#39;sqs&#39;)),

        (r&#39;[^\S\n]+&#39;, Text),
        include(&#39;numbers&#39;),
        (r&#39;!=|==|&lt;&lt;|&gt;&gt;|:=|[-~+/*%=&lt;&gt;&amp;^|.]&#39;, Operator),
        (r&#39;[]{}:(),;[]&#39;, Punctuation),
        (r&#39;(in|is|and|or|not)\b&#39;, Operator.Word),
        include(&#39;expr-keywords&#39;),
        include(&#39;builtins&#39;),
        include(&#39;magicfuncs&#39;),
        include(&#39;magicvars&#39;),
        include(&#39;name&#39;),
    ],
    &#39;expr-inside-fstring&#39;: [
        (r&#39;[{([]&#39;, Punctuation, &#39;expr-inside-fstring-inner&#39;),
        # without format specifier
        (r&#39;(=\s*)?&#39;         # debug (https://bugs.python.org/issue36817)
         r&#39;(\![sraf])?&#39;     # conversion
         r&#39;\}&#39;, String.Interpol, &#39;#pop&#39;),
        # with format specifier
        # we&#39;ll catch the remaining &#39;}&#39; in the outer scope
        (r&#39;(=\s*)?&#39;         # debug (https://bugs.python.org/issue36817)
         r&#39;(\![sraf])?&#39;     # conversion
         r&#39;:&#39;, String.Interpol, &#39;#pop&#39;),
        (r&#39;\s+&#39;, Whitespace),  # allow new lines
        include(&#39;expr&#39;),
    ],
    &#39;expr-inside-fstring-inner&#39;: [
        (r&#39;[{([]&#39;, Punctuation, &#39;expr-inside-fstring-inner&#39;),
        (r&#39;[])}]&#39;, Punctuation, &#39;#pop&#39;),
        (r&#39;\s+&#39;, Whitespace),  # allow new lines
        include(&#39;expr&#39;),
    ],
    &#39;expr-keywords&#39;: [
        # Based on https://docs.python.org/3/reference/expressions.html
        (words((
            &#39;async for&#39;, &#39;await&#39;, &#39;else&#39;, &#39;for&#39;, &#39;if&#39;, &#39;lambda&#39;,
            &#39;yield&#39;, &#39;yield from&#39;), suffix=r&#39;\b&#39;),
         Keyword),
        (words((&#39;True&#39;, &#39;False&#39;, &#39;None&#39;), suffix=r&#39;\b&#39;), Keyword.Constant),
    ],
    &#39;keywords&#39;: [
        (words((
            &#39;assert&#39;, &#39;async&#39;, &#39;await&#39;, &#39;break&#39;, &#39;continue&#39;, &#39;del&#39;, &#39;elif&#39;,
            &#39;else&#39;, &#39;except&#39;, &#39;finally&#39;, &#39;for&#39;, &#39;global&#39;, &#39;if&#39;, &#39;lambda&#39;,
            &#39;pass&#39;, &#39;raise&#39;, &#39;nonlocal&#39;, &#39;return&#39;, &#39;try&#39;, &#39;while&#39;, &#39;yield&#39;,
            &#39;yield from&#39;, &#39;as&#39;, &#39;with&#39;), suffix=r&#39;\b&#39;),
         Keyword),
        (words((&#39;True&#39;, &#39;False&#39;, &#39;None&#39;), suffix=r&#39;\b&#39;), Keyword.Constant),
    ],
    &#39;soft-keywords&#39;: [
        # `match`, `case` and `_` soft keywords
        (r&#39;(^[ \t]*)&#39;              # at beginning of line + possible indentation
         r&#39;(match|case)\b&#39;         # a possible keyword
         r&#39;(?![ \t]*(?:&#39;           # not followed by...
         r&#39;[:,;=^&amp;|@~)\]}]|(?:&#39; +  # characters and keywords that mean this isn&#39;t
                                   # pattern matching (but None/True/False is ok)
         r&#39;|&#39;.join(k for k in keyword.kwlist if k[0].islower()) + r&#39;)\b))&#39;,
         bygroups(Text, Keyword), &#39;soft-keywords-inner&#39;),
    ],
    &#39;soft-keywords-inner&#39;: [
        # optional `_` keyword
        (r&#39;(\s+)([^\n_]*)(_\b)&#39;, bygroups(Whitespace, using(this), Keyword)),
        default(&#39;#pop&#39;)
    ],
    &#39;builtins&#39;: [
        (words((
            &#39;__import__&#39;, &#39;abs&#39;, &#39;aiter&#39;, &#39;all&#39;, &#39;any&#39;, &#39;bin&#39;, &#39;bool&#39;, &#39;bytearray&#39;,
            &#39;breakpoint&#39;, &#39;bytes&#39;, &#39;callable&#39;, &#39;chr&#39;, &#39;classmethod&#39;, &#39;compile&#39;,
            &#39;complex&#39;, &#39;delattr&#39;, &#39;dict&#39;, &#39;dir&#39;, &#39;divmod&#39;, &#39;enumerate&#39;, &#39;eval&#39;,
            &#39;filter&#39;, &#39;float&#39;, &#39;format&#39;, &#39;frozenset&#39;, &#39;getattr&#39;, &#39;globals&#39;,
            &#39;hasattr&#39;, &#39;hash&#39;, &#39;hex&#39;, &#39;id&#39;, &#39;input&#39;, &#39;int&#39;, &#39;isinstance&#39;,
            &#39;issubclass&#39;, &#39;iter&#39;, &#39;len&#39;, &#39;list&#39;, &#39;locals&#39;, &#39;map&#39;, &#39;max&#39;,
            &#39;memoryview&#39;, &#39;min&#39;, &#39;next&#39;, &#39;object&#39;, &#39;oct&#39;, &#39;open&#39;, &#39;ord&#39;, &#39;pow&#39;,
            &#39;print&#39;, &#39;property&#39;, &#39;range&#39;, &#39;repr&#39;, &#39;reversed&#39;, &#39;round&#39;, &#39;set&#39;,
            &#39;setattr&#39;, &#39;slice&#39;, &#39;sorted&#39;, &#39;staticmethod&#39;, &#39;str&#39;, &#39;sum&#39;, &#39;super&#39;,
            &#39;tuple&#39;, &#39;type&#39;, &#39;vars&#39;, &#39;zip&#39;), prefix=r&#39;(?&lt;!\.)&#39;, suffix=r&#39;\b&#39;),
         Name.Builtin),
        (r&#39;(?&lt;!\.)(self|Ellipsis|NotImplemented|cls)\b&#39;, Name.Builtin.Pseudo),
        (words((
            &#39;ArithmeticError&#39;, &#39;AssertionError&#39;, &#39;AttributeError&#39;,
            &#39;BaseException&#39;, &#39;BufferError&#39;, &#39;BytesWarning&#39;, &#39;DeprecationWarning&#39;,
            &#39;EOFError&#39;, &#39;EnvironmentError&#39;, &#39;Exception&#39;, &#39;FloatingPointError&#39;,
            &#39;FutureWarning&#39;, &#39;GeneratorExit&#39;, &#39;IOError&#39;, &#39;ImportError&#39;,
            &#39;ImportWarning&#39;, &#39;IndentationError&#39;, &#39;IndexError&#39;, &#39;KeyError&#39;,
            &#39;KeyboardInterrupt&#39;, &#39;LookupError&#39;, &#39;MemoryError&#39;, &#39;NameError&#39;,
            &#39;NotImplementedError&#39;, &#39;OSError&#39;, &#39;OverflowError&#39;,
            &#39;PendingDeprecationWarning&#39;, &#39;ReferenceError&#39;, &#39;ResourceWarning&#39;,
            &#39;RuntimeError&#39;, &#39;RuntimeWarning&#39;, &#39;StopIteration&#39;,
            &#39;SyntaxError&#39;, &#39;SyntaxWarning&#39;, &#39;SystemError&#39;, &#39;SystemExit&#39;,
            &#39;TabError&#39;, &#39;TypeError&#39;, &#39;UnboundLocalError&#39;, &#39;UnicodeDecodeError&#39;,
            &#39;UnicodeEncodeError&#39;, &#39;UnicodeError&#39;, &#39;UnicodeTranslateError&#39;,
            &#39;UnicodeWarning&#39;, &#39;UserWarning&#39;, &#39;ValueError&#39;, &#39;VMSError&#39;,
            &#39;Warning&#39;, &#39;WindowsError&#39;, &#39;ZeroDivisionError&#39;,
            # new builtin exceptions from PEP 3151
            &#39;BlockingIOError&#39;, &#39;ChildProcessError&#39;, &#39;ConnectionError&#39;,
            &#39;BrokenPipeError&#39;, &#39;ConnectionAbortedError&#39;, &#39;ConnectionRefusedError&#39;,
            &#39;ConnectionResetError&#39;, &#39;FileExistsError&#39;, &#39;FileNotFoundError&#39;,
            &#39;InterruptedError&#39;, &#39;IsADirectoryError&#39;, &#39;NotADirectoryError&#39;,
            &#39;PermissionError&#39;, &#39;ProcessLookupError&#39;, &#39;TimeoutError&#39;,
            # others new in Python 3
            &#39;StopAsyncIteration&#39;, &#39;ModuleNotFoundError&#39;, &#39;RecursionError&#39;,
            &#39;EncodingWarning&#39;),
            prefix=r&#39;(?&lt;!\.)&#39;, suffix=r&#39;\b&#39;),
         Name.Exception),
    ],
    &#39;magicfuncs&#39;: [
        (words((
            &#39;__abs__&#39;, &#39;__add__&#39;, &#39;__aenter__&#39;, &#39;__aexit__&#39;, &#39;__aiter__&#39;,
            &#39;__and__&#39;, &#39;__anext__&#39;, &#39;__await__&#39;, &#39;__bool__&#39;, &#39;__bytes__&#39;,
            &#39;__call__&#39;, &#39;__complex__&#39;, &#39;__contains__&#39;, &#39;__del__&#39;, &#39;__delattr__&#39;,
            &#39;__delete__&#39;, &#39;__delitem__&#39;, &#39;__dir__&#39;, &#39;__divmod__&#39;, &#39;__enter__&#39;,
            &#39;__eq__&#39;, &#39;__exit__&#39;, &#39;__float__&#39;, &#39;__floordiv__&#39;, &#39;__format__&#39;,
            &#39;__ge__&#39;, &#39;__get__&#39;, &#39;__getattr__&#39;, &#39;__getattribute__&#39;,
            &#39;__getitem__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__iadd__&#39;, &#39;__iand__&#39;,
            &#39;__ifloordiv__&#39;, &#39;__ilshift__&#39;, &#39;__imatmul__&#39;, &#39;__imod__&#39;,
            &#39;__imul__&#39;, &#39;__index__&#39;, &#39;__init__&#39;, &#39;__instancecheck__&#39;,
            &#39;__int__&#39;, &#39;__invert__&#39;, &#39;__ior__&#39;, &#39;__ipow__&#39;, &#39;__irshift__&#39;,
            &#39;__isub__&#39;, &#39;__iter__&#39;, &#39;__itruediv__&#39;, &#39;__ixor__&#39;, &#39;__le__&#39;,
            &#39;__len__&#39;, &#39;__length_hint__&#39;, &#39;__lshift__&#39;, &#39;__lt__&#39;, &#39;__matmul__&#39;,
            &#39;__missing__&#39;, &#39;__mod__&#39;, &#39;__mul__&#39;, &#39;__ne__&#39;, &#39;__neg__&#39;,
            &#39;__new__&#39;, &#39;__next__&#39;, &#39;__or__&#39;, &#39;__pos__&#39;, &#39;__pow__&#39;,
            &#39;__prepare__&#39;, &#39;__radd__&#39;, &#39;__rand__&#39;, &#39;__rdivmod__&#39;, &#39;__repr__&#39;,
            &#39;__reversed__&#39;, &#39;__rfloordiv__&#39;, &#39;__rlshift__&#39;, &#39;__rmatmul__&#39;,
            &#39;__rmod__&#39;, &#39;__rmul__&#39;, &#39;__ror__&#39;, &#39;__round__&#39;, &#39;__rpow__&#39;,
            &#39;__rrshift__&#39;, &#39;__rshift__&#39;, &#39;__rsub__&#39;, &#39;__rtruediv__&#39;,
            &#39;__rxor__&#39;, &#39;__set__&#39;, &#39;__setattr__&#39;, &#39;__setitem__&#39;, &#39;__str__&#39;,
            &#39;__sub__&#39;, &#39;__subclasscheck__&#39;, &#39;__truediv__&#39;,
            &#39;__xor__&#39;), suffix=r&#39;\b&#39;),
         Name.Function.Magic),
    ],
    &#39;magicvars&#39;: [
        (words((
            &#39;__annotations__&#39;, &#39;__bases__&#39;, &#39;__class__&#39;, &#39;__closure__&#39;,
            &#39;__code__&#39;, &#39;__defaults__&#39;, &#39;__dict__&#39;, &#39;__doc__&#39;, &#39;__file__&#39;,
            &#39;__func__&#39;, &#39;__globals__&#39;, &#39;__kwdefaults__&#39;, &#39;__module__&#39;,
            &#39;__mro__&#39;, &#39;__name__&#39;, &#39;__objclass__&#39;, &#39;__qualname__&#39;,
            &#39;__self__&#39;, &#39;__slots__&#39;, &#39;__weakref__&#39;), suffix=r&#39;\b&#39;),
         Name.Variable.Magic),
    ],
    &#39;numbers&#39;: [
        (r&#39;(\d(?:_?\d)*\.(?:\d(?:_?\d)*)?|(?:\d(?:_?\d)*)?\.\d(?:_?\d)*)&#39;
         r&#39;([eE][+-]?\d(?:_?\d)*)?&#39;, Number.Float),
        (r&#39;\d(?:_?\d)*[eE][+-]?\d(?:_?\d)*j?&#39;, Number.Float),
        (r&#39;0[oO](?:_?[0-7])+&#39;, Number.Oct),
        (r&#39;0[bB](?:_?[01])+&#39;, Number.Bin),
        (r&#39;0[xX](?:_?[a-fA-F0-9])+&#39;, Number.Hex),
        (r&#39;\d(?:_?\d)*&#39;, Number.Integer),
    ],
    &#39;name&#39;: [
        (r&#39;@&#39; + uni_name, Name.Decorator),
        (r&#39;@&#39;, Operator),  # new matrix multiplication operator
        (uni_name, Name),
    ],
    &#39;funcname&#39;: [
        include(&#39;magicfuncs&#39;),
        (uni_name, Name.Function, &#39;#pop&#39;),
        default(&#39;#pop&#39;),
    ],
    &#39;classname&#39;: [
        (uni_name, Name.Class, &#39;#pop&#39;),
    ],
    &#39;import&#39;: [
        (r&#39;(\s+)(as)(\s+)&#39;, bygroups(Whitespace, Keyword, Whitespace)),
        (r&#39;\.&#39;, Name.Namespace),
        (uni_name, Name.Namespace),
        (r&#39;(\s*)(,)(\s*)&#39;, bygroups(Whitespace, Operator, Whitespace)),
        default(&#39;#pop&#39;)  # all else: go back
    ],
    &#39;fromimport&#39;: [
        (r&#39;(\s+)(import)\b&#39;, bygroups(Whitespace, Keyword.Namespace), &#39;#pop&#39;),
        (r&#39;\.&#39;, Name.Namespace),
        # if None occurs here, it&#39;s &quot;raise x from None&quot;, since None can
        # never be a module name
        (r&#39;None\b&#39;, Keyword.Constant, &#39;#pop&#39;),
        (uni_name, Name.Namespace),
        default(&#39;#pop&#39;),
    ],
    &#39;rfstringescape&#39;: [
        (r&#39;\{\{&#39;, String.Escape),
        (r&#39;\}\}&#39;, String.Escape),
    ],
    &#39;fstringescape&#39;: [
        include(&#39;rfstringescape&#39;),
        include(&#39;stringescape&#39;),
    ],
    &#39;bytesescape&#39;: [
        (r&#39;\\([\\abfnrtv&quot;\&#39;]|\n|x[a-fA-F0-9]{2}|[0-7]{1,3})&#39;, String.Escape)
    ],
    &#39;stringescape&#39;: [
        (r&#39;\\(N\{.*?\}|u[a-fA-F0-9]{4}|U[a-fA-F0-9]{8})&#39;, String.Escape),
        include(&#39;bytesescape&#39;)
    ],
    &#39;fstrings-single&#39;: fstring_rules(String.Single),
    &#39;fstrings-double&#39;: fstring_rules(String.Double),
    &#39;strings-single&#39;: innerstring_rules(String.Single),
    &#39;strings-double&#39;: innerstring_rules(String.Double),
    &#39;dqf&#39;: [
        (r&#39;&quot;&#39;, String.Double, &#39;#pop&#39;),
        (r&#39;\\\\|\\&quot;|\\\n&#39;, String.Escape),  # included here for raw strings
        include(&#39;fstrings-double&#39;)
    ],
    &#39;sqf&#39;: [
        (r&quot;&#39;&quot;, String.Single, &#39;#pop&#39;),
        (r&quot;\\\\|\\&#39;|\\\n&quot;, String.Escape),  # included here for raw strings
        include(&#39;fstrings-single&#39;)
    ],
    &#39;dqs&#39;: [
        (r&#39;&quot;&#39;, String.Double, &#39;#pop&#39;),
        (r&#39;\\\\|\\&quot;|\\\n&#39;, String.Escape),  # included here for raw strings
        include(&#39;strings-double&#39;)
    ],
    &#39;sqs&#39;: [
        (r&quot;&#39;&quot;, String.Single, &#39;#pop&#39;),
        (r&quot;\\\\|\\&#39;|\\\n&quot;, String.Escape),  # included here for raw strings
        include(&#39;strings-single&#39;)
    ],
    &#39;tdqf&#39;: [
        (r&#39;&quot;&quot;&quot;&#39;, String.Double, &#39;#pop&#39;),
        include(&#39;fstrings-double&#39;),
        (r&#39;\n&#39;, String.Double)
    ],
    &#39;tsqf&#39;: [
        (r&quot;&#39;&#39;&#39;&quot;, String.Single, &#39;#pop&#39;),
        include(&#39;fstrings-single&#39;),
        (r&#39;\n&#39;, String.Single)
    ],
    &#39;tdqs&#39;: [
        (r&#39;&quot;&quot;&quot;&#39;, String.Double, &#39;#pop&#39;),
        include(&#39;strings-double&#39;),
        (r&#39;\n&#39;, String.Double)
    ],
    &#39;tsqs&#39;: [
        (r&quot;&#39;&#39;&#39;&quot;, String.Single, &#39;#pop&#39;),
        include(&#39;strings-single&#39;),
        (r&#39;\n&#39;, String.Single)
    ],
}

def analyse_text(text):
    return shebang_matches(text, r&#39;pythonw?(3(\.\d)?)?&#39;) or \
        &#39;import &#39; in text[:1000]
</pre></div>
</div>
<p>Python3Lexer = PythonLexer</p>
<p>class Python2Lexer(RegexLexer):
“””
For Python 2.x source code.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. versionchanged:: 2.5
   This class has been renamed from ``PythonLexer``.  ``PythonLexer`` now
   refers to the Python 3 variant.  File name patterns like ``*.py`` have
   been moved to Python 3 as well.
&quot;&quot;&quot;

name = &#39;Python 2.x&#39;
url = &#39;https://www.python.org&#39;
aliases = [&#39;python2&#39;, &#39;py2&#39;]
filenames = []  # now taken over by PythonLexer (3.x)
mimetypes = [&#39;text/x-python2&#39;, &#39;application/x-python2&#39;]
version_added = &#39;&#39;

def innerstring_rules(ttype):
    return [
        # the old style &#39;%s&#39; % (...) string formatting
        (r&#39;%(\(\w+\))?[-#0 +]*([0-9]+|[*])?(\.([0-9]+|[*]))?&#39;
         &#39;[hlL]?[E-GXc-giorsux%]&#39;, String.Interpol),
        # backslashes, quotes and formatting signs must be parsed one at a time
        (r&#39;[^\\\&#39;&quot;%\n]+&#39;, ttype),
        (r&#39;[\&#39;&quot;\\]&#39;, ttype),
        # unhandled string formatting sign
        (r&#39;%&#39;, ttype),
        # newlines are an error (use &quot;nl&quot; state)
    ]

tokens = {
    &#39;root&#39;: [
        (r&#39;\n&#39;, Whitespace),
        (r&#39;^(\s*)([rRuUbB]{,2})(&quot;&quot;&quot;(?:.|\n)*?&quot;&quot;&quot;)&#39;,
         bygroups(Whitespace, String.Affix, String.Doc)),
        (r&quot;^(\s*)([rRuUbB]{,2})(&#39;&#39;&#39;(?:.|\n)*?&#39;&#39;&#39;)&quot;,
         bygroups(Whitespace, String.Affix, String.Doc)),
        (r&#39;[^\S\n]+&#39;, Text),
        (r&#39;\A#!.+$&#39;, Comment.Hashbang),
        (r&#39;#.*$&#39;, Comment.Single),
        (r&#39;[]{}:(),;[]&#39;, Punctuation),
        (r&#39;\\\n&#39;, Text),
        (r&#39;\\&#39;, Text),
        (r&#39;(in|is|and|or|not)\b&#39;, Operator.Word),
        (r&#39;!=|==|&lt;&lt;|&gt;&gt;|[-~+/*%=&lt;&gt;&amp;^|.]&#39;, Operator),
        include(&#39;keywords&#39;),
        (r&#39;(def)((?:\s|\\\s)+)&#39;, bygroups(Keyword, Whitespace), &#39;funcname&#39;),
        (r&#39;(class)((?:\s|\\\s)+)&#39;, bygroups(Keyword, Whitespace), &#39;classname&#39;),
        (r&#39;(from)((?:\s|\\\s)+)&#39;, bygroups(Keyword.Namespace, Whitespace),
         &#39;fromimport&#39;),
        (r&#39;(import)((?:\s|\\\s)+)&#39;, bygroups(Keyword.Namespace, Whitespace),
         &#39;import&#39;),
        include(&#39;builtins&#39;),
        include(&#39;magicfuncs&#39;),
        include(&#39;magicvars&#39;),
        include(&#39;backtick&#39;),
        (&#39;([rR]|[uUbB][rR]|[rR][uUbB])(&quot;&quot;&quot;)&#39;,
         bygroups(String.Affix, String.Double), &#39;tdqs&#39;),
        (&quot;([rR]|[uUbB][rR]|[rR][uUbB])(&#39;&#39;&#39;)&quot;,
         bygroups(String.Affix, String.Single), &#39;tsqs&#39;),
        (&#39;([rR]|[uUbB][rR]|[rR][uUbB])(&quot;)&#39;,
         bygroups(String.Affix, String.Double), &#39;dqs&#39;),
        (&quot;([rR]|[uUbB][rR]|[rR][uUbB])(&#39;)&quot;,
         bygroups(String.Affix, String.Single), &#39;sqs&#39;),
        (&#39;([uUbB]?)(&quot;&quot;&quot;)&#39;, bygroups(String.Affix, String.Double),
         combined(&#39;stringescape&#39;, &#39;tdqs&#39;)),
        (&quot;([uUbB]?)(&#39;&#39;&#39;)&quot;, bygroups(String.Affix, String.Single),
         combined(&#39;stringescape&#39;, &#39;tsqs&#39;)),
        (&#39;([uUbB]?)(&quot;)&#39;, bygroups(String.Affix, String.Double),
         combined(&#39;stringescape&#39;, &#39;dqs&#39;)),
        (&quot;([uUbB]?)(&#39;)&quot;, bygroups(String.Affix, String.Single),
         combined(&#39;stringescape&#39;, &#39;sqs&#39;)),
        include(&#39;name&#39;),
        include(&#39;numbers&#39;),
    ],
    &#39;keywords&#39;: [
        (words((
            &#39;assert&#39;, &#39;break&#39;, &#39;continue&#39;, &#39;del&#39;, &#39;elif&#39;, &#39;else&#39;, &#39;except&#39;,
            &#39;exec&#39;, &#39;finally&#39;, &#39;for&#39;, &#39;global&#39;, &#39;if&#39;, &#39;lambda&#39;, &#39;pass&#39;,
            &#39;print&#39;, &#39;raise&#39;, &#39;return&#39;, &#39;try&#39;, &#39;while&#39;, &#39;yield&#39;,
            &#39;yield from&#39;, &#39;as&#39;, &#39;with&#39;), suffix=r&#39;\b&#39;),
         Keyword),
    ],
    &#39;builtins&#39;: [
        (words((
            &#39;__import__&#39;, &#39;abs&#39;, &#39;all&#39;, &#39;any&#39;, &#39;apply&#39;, &#39;basestring&#39;, &#39;bin&#39;,
            &#39;bool&#39;, &#39;buffer&#39;, &#39;bytearray&#39;, &#39;bytes&#39;, &#39;callable&#39;, &#39;chr&#39;, &#39;classmethod&#39;,
            &#39;cmp&#39;, &#39;coerce&#39;, &#39;compile&#39;, &#39;complex&#39;, &#39;delattr&#39;, &#39;dict&#39;, &#39;dir&#39;, &#39;divmod&#39;,
            &#39;enumerate&#39;, &#39;eval&#39;, &#39;execfile&#39;, &#39;exit&#39;, &#39;file&#39;, &#39;filter&#39;, &#39;float&#39;,
            &#39;frozenset&#39;, &#39;getattr&#39;, &#39;globals&#39;, &#39;hasattr&#39;, &#39;hash&#39;, &#39;hex&#39;, &#39;id&#39;,
            &#39;input&#39;, &#39;int&#39;, &#39;intern&#39;, &#39;isinstance&#39;, &#39;issubclass&#39;, &#39;iter&#39;, &#39;len&#39;,
            &#39;list&#39;, &#39;locals&#39;, &#39;long&#39;, &#39;map&#39;, &#39;max&#39;, &#39;min&#39;, &#39;next&#39;, &#39;object&#39;,
            &#39;oct&#39;, &#39;open&#39;, &#39;ord&#39;, &#39;pow&#39;, &#39;property&#39;, &#39;range&#39;, &#39;raw_input&#39;, &#39;reduce&#39;,
            &#39;reload&#39;, &#39;repr&#39;, &#39;reversed&#39;, &#39;round&#39;, &#39;set&#39;, &#39;setattr&#39;, &#39;slice&#39;,
            &#39;sorted&#39;, &#39;staticmethod&#39;, &#39;str&#39;, &#39;sum&#39;, &#39;super&#39;, &#39;tuple&#39;, &#39;type&#39;,
            &#39;unichr&#39;, &#39;unicode&#39;, &#39;vars&#39;, &#39;xrange&#39;, &#39;zip&#39;),
            prefix=r&#39;(?&lt;!\.)&#39;, suffix=r&#39;\b&#39;),
         Name.Builtin),
        (r&#39;(?&lt;!\.)(self|None|Ellipsis|NotImplemented|False|True|cls&#39;
         r&#39;)\b&#39;, Name.Builtin.Pseudo),
        (words((
            &#39;ArithmeticError&#39;, &#39;AssertionError&#39;, &#39;AttributeError&#39;,
            &#39;BaseException&#39;, &#39;DeprecationWarning&#39;, &#39;EOFError&#39;, &#39;EnvironmentError&#39;,
            &#39;Exception&#39;, &#39;FloatingPointError&#39;, &#39;FutureWarning&#39;, &#39;GeneratorExit&#39;,
            &#39;IOError&#39;, &#39;ImportError&#39;, &#39;ImportWarning&#39;, &#39;IndentationError&#39;,
            &#39;IndexError&#39;, &#39;KeyError&#39;, &#39;KeyboardInterrupt&#39;, &#39;LookupError&#39;,
            &#39;MemoryError&#39;, &#39;NameError&#39;,
            &#39;NotImplementedError&#39;, &#39;OSError&#39;, &#39;OverflowError&#39;, &#39;OverflowWarning&#39;,
            &#39;PendingDeprecationWarning&#39;, &#39;ReferenceError&#39;,
            &#39;RuntimeError&#39;, &#39;RuntimeWarning&#39;, &#39;StandardError&#39;, &#39;StopIteration&#39;,
            &#39;SyntaxError&#39;, &#39;SyntaxWarning&#39;, &#39;SystemError&#39;, &#39;SystemExit&#39;,
            &#39;TabError&#39;, &#39;TypeError&#39;, &#39;UnboundLocalError&#39;, &#39;UnicodeDecodeError&#39;,
            &#39;UnicodeEncodeError&#39;, &#39;UnicodeError&#39;, &#39;UnicodeTranslateError&#39;,
            &#39;UnicodeWarning&#39;, &#39;UserWarning&#39;, &#39;ValueError&#39;, &#39;VMSError&#39;, &#39;Warning&#39;,
            &#39;WindowsError&#39;, &#39;ZeroDivisionError&#39;), prefix=r&#39;(?&lt;!\.)&#39;, suffix=r&#39;\b&#39;),
         Name.Exception),
    ],
    &#39;magicfuncs&#39;: [
        (words((
            &#39;__abs__&#39;, &#39;__add__&#39;, &#39;__and__&#39;, &#39;__call__&#39;, &#39;__cmp__&#39;, &#39;__coerce__&#39;,
            &#39;__complex__&#39;, &#39;__contains__&#39;, &#39;__del__&#39;, &#39;__delattr__&#39;, &#39;__delete__&#39;,
            &#39;__delitem__&#39;, &#39;__delslice__&#39;, &#39;__div__&#39;, &#39;__divmod__&#39;, &#39;__enter__&#39;,
            &#39;__eq__&#39;, &#39;__exit__&#39;, &#39;__float__&#39;, &#39;__floordiv__&#39;, &#39;__ge__&#39;, &#39;__get__&#39;,
            &#39;__getattr__&#39;, &#39;__getattribute__&#39;, &#39;__getitem__&#39;, &#39;__getslice__&#39;, &#39;__gt__&#39;,
            &#39;__hash__&#39;, &#39;__hex__&#39;, &#39;__iadd__&#39;, &#39;__iand__&#39;, &#39;__idiv__&#39;, &#39;__ifloordiv__&#39;,
            &#39;__ilshift__&#39;, &#39;__imod__&#39;, &#39;__imul__&#39;, &#39;__index__&#39;, &#39;__init__&#39;,
            &#39;__instancecheck__&#39;, &#39;__int__&#39;, &#39;__invert__&#39;, &#39;__iop__&#39;, &#39;__ior__&#39;,
            &#39;__ipow__&#39;, &#39;__irshift__&#39;, &#39;__isub__&#39;, &#39;__iter__&#39;, &#39;__itruediv__&#39;,
            &#39;__ixor__&#39;, &#39;__le__&#39;, &#39;__len__&#39;, &#39;__long__&#39;, &#39;__lshift__&#39;, &#39;__lt__&#39;,
            &#39;__missing__&#39;, &#39;__mod__&#39;, &#39;__mul__&#39;, &#39;__ne__&#39;, &#39;__neg__&#39;, &#39;__new__&#39;,
            &#39;__nonzero__&#39;, &#39;__oct__&#39;, &#39;__op__&#39;, &#39;__or__&#39;, &#39;__pos__&#39;, &#39;__pow__&#39;,
            &#39;__radd__&#39;, &#39;__rand__&#39;, &#39;__rcmp__&#39;, &#39;__rdiv__&#39;, &#39;__rdivmod__&#39;, &#39;__repr__&#39;,
            &#39;__reversed__&#39;, &#39;__rfloordiv__&#39;, &#39;__rlshift__&#39;, &#39;__rmod__&#39;, &#39;__rmul__&#39;,
            &#39;__rop__&#39;, &#39;__ror__&#39;, &#39;__rpow__&#39;, &#39;__rrshift__&#39;, &#39;__rshift__&#39;, &#39;__rsub__&#39;,
            &#39;__rtruediv__&#39;, &#39;__rxor__&#39;, &#39;__set__&#39;, &#39;__setattr__&#39;, &#39;__setitem__&#39;,
            &#39;__setslice__&#39;, &#39;__str__&#39;, &#39;__sub__&#39;, &#39;__subclasscheck__&#39;, &#39;__truediv__&#39;,
            &#39;__unicode__&#39;, &#39;__xor__&#39;), suffix=r&#39;\b&#39;),
         Name.Function.Magic),
    ],
    &#39;magicvars&#39;: [
        (words((
            &#39;__bases__&#39;, &#39;__class__&#39;, &#39;__closure__&#39;, &#39;__code__&#39;, &#39;__defaults__&#39;,
            &#39;__dict__&#39;, &#39;__doc__&#39;, &#39;__file__&#39;, &#39;__func__&#39;, &#39;__globals__&#39;,
            &#39;__metaclass__&#39;, &#39;__module__&#39;, &#39;__mro__&#39;, &#39;__name__&#39;, &#39;__self__&#39;,
            &#39;__slots__&#39;, &#39;__weakref__&#39;),
            suffix=r&#39;\b&#39;),
         Name.Variable.Magic),
    ],
    &#39;numbers&#39;: [
        (r&#39;(\d+\.\d*|\d*\.\d+)([eE][+-]?[0-9]+)?j?&#39;, Number.Float),
        (r&#39;\d+[eE][+-]?[0-9]+j?&#39;, Number.Float),
        (r&#39;0[0-7]+j?&#39;, Number.Oct),
        (r&#39;0[bB][01]+&#39;, Number.Bin),
        (r&#39;0[xX][a-fA-F0-9]+&#39;, Number.Hex),
        (r&#39;\d+L&#39;, Number.Integer.Long),
        (r&#39;\d+j?&#39;, Number.Integer)
    ],
    &#39;backtick&#39;: [
        (&#39;`.*?`&#39;, String.Backtick),
    ],
    &#39;name&#39;: [
        (r&#39;@[\w.]+&#39;, Name.Decorator),
        (r&#39;[a-zA-Z_]\w*&#39;, Name),
    ],
    &#39;funcname&#39;: [
        include(&#39;magicfuncs&#39;),
        (r&#39;[a-zA-Z_]\w*&#39;, Name.Function, &#39;#pop&#39;),
        default(&#39;#pop&#39;),
    ],
    &#39;classname&#39;: [
        (r&#39;[a-zA-Z_]\w*&#39;, Name.Class, &#39;#pop&#39;)
    ],
    &#39;import&#39;: [
        (r&#39;(?:[ \t]|\\\n)+&#39;, Text),
        (r&#39;as\b&#39;, Keyword.Namespace),
        (r&#39;,&#39;, Operator),
        (r&#39;[a-zA-Z_][\w.]*&#39;, Name.Namespace),
        default(&#39;#pop&#39;)  # all else: go back
    ],
    &#39;fromimport&#39;: [
        (r&#39;(?:[ \t]|\\\n)+&#39;, Text),
        (r&#39;import\b&#39;, Keyword.Namespace, &#39;#pop&#39;),
        # if None occurs here, it&#39;s &quot;raise x from None&quot;, since None can
        # never be a module name
        (r&#39;None\b&#39;, Name.Builtin.Pseudo, &#39;#pop&#39;),
        # sadly, in &quot;raise x from y&quot; y will be highlighted as namespace too
        (r&#39;[a-zA-Z_.][\w.]*&#39;, Name.Namespace),
        # anything else here also means &quot;raise x from y&quot; and is therefore
        # not an error
        default(&#39;#pop&#39;),
    ],
    &#39;stringescape&#39;: [
        (r&#39;\\([\\abfnrtv&quot;\&#39;]|\n|N\{.*?\}|u[a-fA-F0-9]{4}|&#39;
         r&#39;U[a-fA-F0-9]{8}|x[a-fA-F0-9]{2}|[0-7]{1,3})&#39;, String.Escape)
    ],
    &#39;strings-single&#39;: innerstring_rules(String.Single),
    &#39;strings-double&#39;: innerstring_rules(String.Double),
    &#39;dqs&#39;: [
        (r&#39;&quot;&#39;, String.Double, &#39;#pop&#39;),
        (r&#39;\\\\|\\&quot;|\\\n&#39;, String.Escape),  # included here for raw strings
        include(&#39;strings-double&#39;)
    ],
    &#39;sqs&#39;: [
        (r&quot;&#39;&quot;, String.Single, &#39;#pop&#39;),
        (r&quot;\\\\|\\&#39;|\\\n&quot;, String.Escape),  # included here for raw strings
        include(&#39;strings-single&#39;)
    ],
    &#39;tdqs&#39;: [
        (r&#39;&quot;&quot;&quot;&#39;, String.Double, &#39;#pop&#39;),
        include(&#39;strings-double&#39;),
        (r&#39;\n&#39;, String.Double)
    ],
    &#39;tsqs&#39;: [
        (r&quot;&#39;&#39;&#39;&quot;, String.Single, &#39;#pop&#39;),
        include(&#39;strings-single&#39;),
        (r&#39;\n&#39;, String.Single)
    ],
}

def analyse_text(text):
    return shebang_matches(text, r&#39;pythonw?2(\.\d)?&#39;)
</pre></div>
</div>
<p>class _PythonConsoleLexerBase(RegexLexer):
name = ‘Python console session’
aliases = [‘pycon’, ‘python-console’]
mimetypes = [‘text/x-python-doctest’]</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;&quot;&quot;Auxiliary lexer for `PythonConsoleLexer`.

Code tokens are output as ``Token.Other.Code``, traceback tokens as
``Token.Other.Traceback``.
&quot;&quot;&quot;
tokens = {
    &#39;root&#39;: [
        (r&#39;(&gt;&gt;&gt; )(.*\n)&#39;, bygroups(Generic.Prompt, Other.Code), &#39;continuations&#39;),
        # This happens, e.g., when tracebacks are embedded in documentation;
        # trailing whitespaces are often stripped in such contexts.
        (r&#39;(&gt;&gt;&gt;)(\n)&#39;, bygroups(Generic.Prompt, Whitespace)),
        (r&#39;(\^C)?Traceback \(most recent call last\):\n&#39;, Other.Traceback, &#39;traceback&#39;),
        # SyntaxError starts with this
        (r&#39;  File &quot;[^&quot;]+&quot;, line \d+&#39;, Other.Traceback, &#39;traceback&#39;),
        (r&#39;.*\n&#39;, Generic.Output),
    ],
    &#39;continuations&#39;: [
        (r&#39;(\.\.\. )(.*\n)&#39;, bygroups(Generic.Prompt, Other.Code)),
        # See above.
        (r&#39;(\.\.\.)(\n)&#39;, bygroups(Generic.Prompt, Whitespace)),
        default(&#39;#pop&#39;),
    ],
    &#39;traceback&#39;: [
        # As soon as we see a traceback, consume everything until the next
        # &gt;&gt;&gt; prompt.
        (r&#39;(?=&gt;&gt;&gt;( |$))&#39;, Text, &#39;#pop&#39;),
        (r&#39;(KeyboardInterrupt)(\n)&#39;, bygroups(Name.Class, Whitespace)),
        (r&#39;.*\n&#39;, Other.Traceback),
    ],
}
</pre></div>
</div>
<p>class PythonConsoleLexer(DelegatingLexer):
“””
For Python console output or doctests, such as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. sourcecode:: pycon

    &gt;&gt;&gt; a = &#39;foo&#39;
    &gt;&gt;&gt; print(a)
    foo
    &gt;&gt;&gt; 1 / 0
    Traceback (most recent call last):
      File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
    ZeroDivisionError: integer division or modulo by zero

Additional options:

`python3`
    Use Python 3 lexer for code.  Default is ``True``.

    .. versionadded:: 1.0
    .. versionchanged:: 2.5
       Now defaults to ``True``.
&quot;&quot;&quot;

name = &#39;Python console session&#39;
aliases = [&#39;pycon&#39;, &#39;python-console&#39;]
mimetypes = [&#39;text/x-python-doctest&#39;]
url = &#39;https://python.org&#39;
version_added = &#39;&#39;

def __init__(self, **options):
    python3 = get_bool_opt(options, &#39;python3&#39;, True)
    if python3:
        pylexer = PythonLexer
        tblexer = PythonTracebackLexer
    else:
        pylexer = Python2Lexer
        tblexer = Python2TracebackLexer
    # We have two auxiliary lexers. Use DelegatingLexer twice with
    # different tokens.  TODO: DelegatingLexer should support this
    # directly, by accepting a tuplet of auxiliary lexers and a tuple of
    # distinguishing tokens. Then we wouldn&#39;t need this intermediary
    # class.
    class _ReplaceInnerCode(DelegatingLexer):
        def __init__(self, **options):
            super().__init__(pylexer, _PythonConsoleLexerBase, Other.Code, **options)
    super().__init__(tblexer, _ReplaceInnerCode, Other.Traceback, **options)
</pre></div>
</div>
<p>class PythonTracebackLexer(RegexLexer):
“””
For Python 3.x tracebacks, with support for chained exceptions.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. versionchanged:: 2.5
   This is now the default ``PythonTracebackLexer``.  It is still available
   as the alias ``Python3TracebackLexer``.
&quot;&quot;&quot;

name = &#39;Python Traceback&#39;
aliases = [&#39;pytb&#39;, &#39;py3tb&#39;]
filenames = [&#39;*.pytb&#39;, &#39;*.py3tb&#39;]
mimetypes = [&#39;text/x-python-traceback&#39;, &#39;text/x-python3-traceback&#39;]
url = &#39;https://python.org&#39;
version_added = &#39;1.0&#39;

tokens = {
    &#39;root&#39;: [
        (r&#39;\n&#39;, Whitespace),
        (r&#39;^(\^C)?Traceback \(most recent call last\):\n&#39;, Generic.Traceback, &#39;intb&#39;),
        (r&#39;^During handling of the above exception, another &#39;
         r&#39;exception occurred:\n\n&#39;, Generic.Traceback),
        (r&#39;^The above exception was the direct cause of the &#39;
         r&#39;following exception:\n\n&#39;, Generic.Traceback),
        (r&#39;^(?=  File &quot;[^&quot;]+&quot;, line \d+)&#39;, Generic.Traceback, &#39;intb&#39;),
        (r&#39;^.*\n&#39;, Other),
    ],
    &#39;intb&#39;: [
        (r&#39;^(  File )(&quot;[^&quot;]+&quot;)(, line )(\d+)(, in )(.+)(\n)&#39;,
         bygroups(Text, Name.Builtin, Text, Number, Text, Name, Whitespace)),
        (r&#39;^(  File )(&quot;[^&quot;]+&quot;)(, line )(\d+)(\n)&#39;,
         bygroups(Text, Name.Builtin, Text, Number, Whitespace)),
        (r&#39;^(    )(.+)(\n)&#39;,
         bygroups(Whitespace, using(PythonLexer), Whitespace), &#39;markers&#39;),
        (r&#39;^([ \t]*)(\.\.\.)(\n)&#39;,
         bygroups(Whitespace, Comment, Whitespace)),  # for doctests...
        (r&#39;^([^:]+)(: )(.+)(\n)&#39;,
         bygroups(Generic.Error, Text, Name, Whitespace), &#39;#pop&#39;),
        (r&#39;^([a-zA-Z_][\w.]*)(:?\n)&#39;,
         bygroups(Generic.Error, Whitespace), &#39;#pop&#39;),
        default(&#39;#pop&#39;),
    ],
    &#39;markers&#39;: [
        # Either `PEP 657 &lt;https://www.python.org/dev/peps/pep-0657/&gt;`
        # error locations in Python 3.11+, or single-caret markers
        # for syntax errors before that.
        (r&#39;^( {4,})([~^]+)(\n)&#39;,
         bygroups(Whitespace, Punctuation.Marker, Whitespace),
         &#39;#pop&#39;),
        default(&#39;#pop&#39;),
    ],
}
</pre></div>
</div>
<p>Python3TracebackLexer = PythonTracebackLexer</p>
<p>class Python2TracebackLexer(RegexLexer):
“””
For Python tracebacks.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. versionchanged:: 2.5
   This class has been renamed from ``PythonTracebackLexer``.
   ``PythonTracebackLexer`` now refers to the Python 3 variant.
&quot;&quot;&quot;

name = &#39;Python 2.x Traceback&#39;
aliases = [&#39;py2tb&#39;]
filenames = [&#39;*.py2tb&#39;]
mimetypes = [&#39;text/x-python2-traceback&#39;]
url = &#39;https://python.org&#39;
version_added = &#39;0.7&#39;

tokens = {
    &#39;root&#39;: [
        # Cover both (most recent call last) and (innermost last)
        # The optional ^C allows us to catch keyboard interrupt signals.
        (r&#39;^(\^C)?(Traceback.*\n)&#39;,
         bygroups(Text, Generic.Traceback), &#39;intb&#39;),
        # SyntaxError starts with this.
        (r&#39;^(?=  File &quot;[^&quot;]+&quot;, line \d+)&#39;, Generic.Traceback, &#39;intb&#39;),
        (r&#39;^.*\n&#39;, Other),
    ],
    &#39;intb&#39;: [
        (r&#39;^(  File )(&quot;[^&quot;]+&quot;)(, line )(\d+)(, in )(.+)(\n)&#39;,
         bygroups(Text, Name.Builtin, Text, Number, Text, Name, Whitespace)),
        (r&#39;^(  File )(&quot;[^&quot;]+&quot;)(, line )(\d+)(\n)&#39;,
         bygroups(Text, Name.Builtin, Text, Number, Whitespace)),
        (r&#39;^(    )(.+)(\n)&#39;,
         bygroups(Text, using(Python2Lexer), Whitespace), &#39;marker&#39;),
        (r&#39;^([ \t]*)(\.\.\.)(\n)&#39;,
         bygroups(Text, Comment, Whitespace)),  # for doctests...
        (r&#39;^([^:]+)(: )(.+)(\n)&#39;,
         bygroups(Generic.Error, Text, Name, Whitespace), &#39;#pop&#39;),
        (r&#39;^([a-zA-Z_]\w*)(:?\n)&#39;,
         bygroups(Generic.Error, Whitespace), &#39;#pop&#39;)
    ],
    &#39;marker&#39;: [
        # For syntax errors.
        (r&#39;( {4,})(\^)&#39;, bygroups(Text, Punctuation.Marker), &#39;#pop&#39;),
        default(&#39;#pop&#39;),
    ],
}
</pre></div>
</div>
<p>class CythonLexer(RegexLexer):
“””
For Pyrex and Cython source code.
“””</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>name = &#39;Cython&#39;
url = &#39;https://cython.org&#39;
aliases = [&#39;cython&#39;, &#39;pyx&#39;, &#39;pyrex&#39;]
filenames = [&#39;*.pyx&#39;, &#39;*.pxd&#39;, &#39;*.pxi&#39;]
mimetypes = [&#39;text/x-cython&#39;, &#39;application/x-cython&#39;]
version_added = &#39;1.1&#39;

tokens = {
    &#39;root&#39;: [
        (r&#39;\n&#39;, Whitespace),
        (r&#39;^(\s*)(&quot;&quot;&quot;(?:.|\n)*?&quot;&quot;&quot;)&#39;, bygroups(Whitespace, String.Doc)),
        (r&quot;^(\s*)(&#39;&#39;&#39;(?:.|\n)*?&#39;&#39;&#39;)&quot;, bygroups(Whitespace, String.Doc)),
        (r&#39;[^\S\n]+&#39;, Text),
        (r&#39;#.*$&#39;, Comment),
        (r&#39;[]{}:(),;[]&#39;, Punctuation),
        (r&#39;\\\n&#39;, Whitespace),
        (r&#39;\\&#39;, Text),
        (r&#39;(in|is|and|or|not)\b&#39;, Operator.Word),
        (r&#39;(&lt;)([a-zA-Z0-9.?]+)(&gt;)&#39;,
         bygroups(Punctuation, Keyword.Type, Punctuation)),
        (r&#39;!=|==|&lt;&lt;|&gt;&gt;|[-~+/*%=&lt;&gt;&amp;^|.?]&#39;, Operator),
        (r&#39;(from)(\d+)(&lt;=)(\s+)(&lt;)(\d+)(:)&#39;,
         bygroups(Keyword, Number.Integer, Operator, Whitespace, Operator,
                  Name, Punctuation)),
        include(&#39;keywords&#39;),
        (r&#39;(def|property)(\s+)&#39;, bygroups(Keyword, Whitespace), &#39;funcname&#39;),
        (r&#39;(cp?def)(\s+)&#39;, bygroups(Keyword, Whitespace), &#39;cdef&#39;),
        # (should actually start a block with only cdefs)
        (r&#39;(cdef)(:)&#39;, bygroups(Keyword, Punctuation)),
        (r&#39;(class|struct)(\s+)&#39;, bygroups(Keyword, Whitespace), &#39;classname&#39;),
        (r&#39;(from)(\s+)&#39;, bygroups(Keyword, Whitespace), &#39;fromimport&#39;),
        (r&#39;(c?import)(\s+)&#39;, bygroups(Keyword, Whitespace), &#39;import&#39;),
        include(&#39;builtins&#39;),
        include(&#39;backtick&#39;),
        (&#39;(?:[rR]|[uU][rR]|[rR][uU])&quot;&quot;&quot;&#39;, String, &#39;tdqs&#39;),
        (&quot;(?:[rR]|[uU][rR]|[rR][uU])&#39;&#39;&#39;&quot;, String, &#39;tsqs&#39;),
        (&#39;(?:[rR]|[uU][rR]|[rR][uU])&quot;&#39;, String, &#39;dqs&#39;),
        (&quot;(?:[rR]|[uU][rR]|[rR][uU])&#39;&quot;, String, &#39;sqs&#39;),
        (&#39;[uU]?&quot;&quot;&quot;&#39;, String, combined(&#39;stringescape&#39;, &#39;tdqs&#39;)),
        (&quot;[uU]?&#39;&#39;&#39;&quot;, String, combined(&#39;stringescape&#39;, &#39;tsqs&#39;)),
        (&#39;[uU]?&quot;&#39;, String, combined(&#39;stringescape&#39;, &#39;dqs&#39;)),
        (&quot;[uU]?&#39;&quot;, String, combined(&#39;stringescape&#39;, &#39;sqs&#39;)),
        include(&#39;name&#39;),
        include(&#39;numbers&#39;),
    ],
    &#39;keywords&#39;: [
        (words((
            &#39;assert&#39;, &#39;async&#39;, &#39;await&#39;, &#39;break&#39;, &#39;by&#39;, &#39;continue&#39;, &#39;ctypedef&#39;, &#39;del&#39;, &#39;elif&#39;,
            &#39;else&#39;, &#39;except&#39;, &#39;except?&#39;, &#39;exec&#39;, &#39;finally&#39;, &#39;for&#39;, &#39;fused&#39;, &#39;gil&#39;,
            &#39;global&#39;, &#39;if&#39;, &#39;include&#39;, &#39;lambda&#39;, &#39;nogil&#39;, &#39;pass&#39;, &#39;print&#39;,
            &#39;raise&#39;, &#39;return&#39;, &#39;try&#39;, &#39;while&#39;, &#39;yield&#39;, &#39;as&#39;, &#39;with&#39;), suffix=r&#39;\b&#39;),
         Keyword),
        (r&#39;(DEF|IF|ELIF|ELSE)\b&#39;, Comment.Preproc),
    ],
    &#39;builtins&#39;: [
        (words((
            &#39;__import__&#39;, &#39;abs&#39;, &#39;all&#39;, &#39;any&#39;, &#39;apply&#39;, &#39;basestring&#39;, &#39;bin&#39;, &#39;bint&#39;,
            &#39;bool&#39;, &#39;buffer&#39;, &#39;bytearray&#39;, &#39;bytes&#39;, &#39;callable&#39;, &#39;chr&#39;,
            &#39;classmethod&#39;, &#39;cmp&#39;, &#39;coerce&#39;, &#39;compile&#39;, &#39;complex&#39;, &#39;delattr&#39;,
            &#39;dict&#39;, &#39;dir&#39;, &#39;divmod&#39;, &#39;enumerate&#39;, &#39;eval&#39;, &#39;execfile&#39;, &#39;exit&#39;,
            &#39;file&#39;, &#39;filter&#39;, &#39;float&#39;, &#39;frozenset&#39;, &#39;getattr&#39;, &#39;globals&#39;,
            &#39;hasattr&#39;, &#39;hash&#39;, &#39;hex&#39;, &#39;id&#39;, &#39;input&#39;, &#39;int&#39;, &#39;intern&#39;, &#39;isinstance&#39;,
            &#39;issubclass&#39;, &#39;iter&#39;, &#39;len&#39;, &#39;list&#39;, &#39;locals&#39;, &#39;long&#39;, &#39;map&#39;, &#39;max&#39;,
            &#39;min&#39;, &#39;next&#39;, &#39;object&#39;, &#39;oct&#39;, &#39;open&#39;, &#39;ord&#39;, &#39;pow&#39;, &#39;property&#39;, &#39;Py_ssize_t&#39;,
            &#39;range&#39;, &#39;raw_input&#39;, &#39;reduce&#39;, &#39;reload&#39;, &#39;repr&#39;, &#39;reversed&#39;,
            &#39;round&#39;, &#39;set&#39;, &#39;setattr&#39;, &#39;slice&#39;, &#39;sorted&#39;, &#39;staticmethod&#39;,
            &#39;str&#39;, &#39;sum&#39;, &#39;super&#39;, &#39;tuple&#39;, &#39;type&#39;, &#39;unichr&#39;, &#39;unicode&#39;, &#39;unsigned&#39;,
            &#39;vars&#39;, &#39;xrange&#39;, &#39;zip&#39;), prefix=r&#39;(?&lt;!\.)&#39;, suffix=r&#39;\b&#39;),
         Name.Builtin),
        (r&#39;(?&lt;!\.)(self|None|Ellipsis|NotImplemented|False|True|NULL&#39;
         r&#39;)\b&#39;, Name.Builtin.Pseudo),
        (words((
            &#39;ArithmeticError&#39;, &#39;AssertionError&#39;, &#39;AttributeError&#39;,
            &#39;BaseException&#39;, &#39;DeprecationWarning&#39;, &#39;EOFError&#39;, &#39;EnvironmentError&#39;,
            &#39;Exception&#39;, &#39;FloatingPointError&#39;, &#39;FutureWarning&#39;, &#39;GeneratorExit&#39;,
            &#39;IOError&#39;, &#39;ImportError&#39;, &#39;ImportWarning&#39;, &#39;IndentationError&#39;,
            &#39;IndexError&#39;, &#39;KeyError&#39;, &#39;KeyboardInterrupt&#39;, &#39;LookupError&#39;,
            &#39;MemoryError&#39;, &#39;NameError&#39;, &#39;NotImplemented&#39;, &#39;NotImplementedError&#39;,
            &#39;OSError&#39;, &#39;OverflowError&#39;, &#39;OverflowWarning&#39;,
            &#39;PendingDeprecationWarning&#39;, &#39;ReferenceError&#39;, &#39;RuntimeError&#39;,
            &#39;RuntimeWarning&#39;, &#39;StandardError&#39;, &#39;StopIteration&#39;, &#39;SyntaxError&#39;,
            &#39;SyntaxWarning&#39;, &#39;SystemError&#39;, &#39;SystemExit&#39;, &#39;TabError&#39;,
            &#39;TypeError&#39;, &#39;UnboundLocalError&#39;, &#39;UnicodeDecodeError&#39;,
            &#39;UnicodeEncodeError&#39;, &#39;UnicodeError&#39;, &#39;UnicodeTranslateError&#39;,
            &#39;UnicodeWarning&#39;, &#39;UserWarning&#39;, &#39;ValueError&#39;, &#39;Warning&#39;,
            &#39;ZeroDivisionError&#39;), prefix=r&#39;(?&lt;!\.)&#39;, suffix=r&#39;\b&#39;),
         Name.Exception),
    ],
    &#39;numbers&#39;: [
        (r&#39;(\d+\.?\d*|\d*\.\d+)([eE][+-]?[0-9]+)?&#39;, Number.Float),
        (r&#39;0\d+&#39;, Number.Oct),
        (r&#39;0[xX][a-fA-F0-9]+&#39;, Number.Hex),
        (r&#39;\d+L&#39;, Number.Integer.Long),
        (r&#39;\d+&#39;, Number.Integer)
    ],
    &#39;backtick&#39;: [
        (&#39;`.*?`&#39;, String.Backtick),
    ],
    &#39;name&#39;: [
        (r&#39;@\w+&#39;, Name.Decorator),
        (r&#39;[a-zA-Z_]\w*&#39;, Name),
    ],
    &#39;funcname&#39;: [
        (r&#39;[a-zA-Z_]\w*&#39;, Name.Function, &#39;#pop&#39;)
    ],
    &#39;cdef&#39;: [
        (r&#39;(public|readonly|extern|api|inline)\b&#39;, Keyword.Reserved),
        (r&#39;(struct|enum|union|class)\b&#39;, Keyword),
        (r&#39;([a-zA-Z_]\w*)(\s*)(?=[(:#=]|$)&#39;,
         bygroups(Name.Function, Whitespace), &#39;#pop&#39;),
        (r&#39;([a-zA-Z_]\w*)(\s*)(,)&#39;,
         bygroups(Name.Function, Whitespace, Punctuation)),
        (r&#39;from\b&#39;, Keyword, &#39;#pop&#39;),
        (r&#39;as\b&#39;, Keyword),
        (r&#39;:&#39;, Punctuation, &#39;#pop&#39;),
        (r&#39;(?=[&quot;\&#39;])&#39;, Text, &#39;#pop&#39;),
        (r&#39;[a-zA-Z_]\w*&#39;, Keyword.Type),
        (r&#39;.&#39;, Text),
    ],
    &#39;classname&#39;: [
        (r&#39;[a-zA-Z_]\w*&#39;, Name.Class, &#39;#pop&#39;)
    ],
    &#39;import&#39;: [
        (r&#39;(\s+)(as)(\s+)&#39;, bygroups(Whitespace, Keyword, Whitespace)),
        (r&#39;[a-zA-Z_][\w.]*&#39;, Name.Namespace),
        (r&#39;(\s*)(,)(\s*)&#39;, bygroups(Whitespace, Operator, Whitespace)),
        default(&#39;#pop&#39;)  # all else: go back
    ],
    &#39;fromimport&#39;: [
        (r&#39;(\s+)(c?import)\b&#39;, bygroups(Whitespace, Keyword), &#39;#pop&#39;),
        (r&#39;[a-zA-Z_.][\w.]*&#39;, Name.Namespace),
        # ``cdef foo from &quot;header&quot;``, or ``for foo from 0 &lt; i &lt; 10``
        default(&#39;#pop&#39;),
    ],
    &#39;stringescape&#39;: [
        (r&#39;\\([\\abfnrtv&quot;\&#39;]|\n|N\{.*?\}|u[a-fA-F0-9]{4}|&#39;
         r&#39;U[a-fA-F0-9]{8}|x[a-fA-F0-9]{2}|[0-7]{1,3})&#39;, String.Escape)
    ],
    &#39;strings&#39;: [
        (r&#39;%(\([a-zA-Z0-9]+\))?[-#0 +]*([0-9]+|[*])?(\.([0-9]+|[*]))?&#39;
         &#39;[hlL]?[E-GXc-giorsux%]&#39;, String.Interpol),
        (r&#39;[^\\\&#39;&quot;%\n]+&#39;, String),
        # quotes, percents and backslashes must be parsed one at a time
        (r&#39;[\&#39;&quot;\\]&#39;, String),
        # unhandled string formatting sign
        (r&#39;%&#39;, String)
        # newlines are an error (use &quot;nl&quot; state)
    ],
    &#39;nl&#39;: [
        (r&#39;\n&#39;, String)
    ],
    &#39;dqs&#39;: [
        (r&#39;&quot;&#39;, String, &#39;#pop&#39;),
        (r&#39;\\\\|\\&quot;|\\\n&#39;, String.Escape),  # included here again for raw strings
        include(&#39;strings&#39;)
    ],
    &#39;sqs&#39;: [
        (r&quot;&#39;&quot;, String, &#39;#pop&#39;),
        (r&quot;\\\\|\\&#39;|\\\n&quot;, String.Escape),  # included here again for raw strings
        include(&#39;strings&#39;)
    ],
    &#39;tdqs&#39;: [
        (r&#39;&quot;&quot;&quot;&#39;, String, &#39;#pop&#39;),
        include(&#39;strings&#39;),
        include(&#39;nl&#39;)
    ],
    &#39;tsqs&#39;: [
        (r&quot;&#39;&#39;&#39;&quot;, String, &#39;#pop&#39;),
        include(&#39;strings&#39;),
        include(&#39;nl&#39;)
    ],
}
</pre></div>
</div>
<p>class DgLexer(RegexLexer):
“””
Lexer for dg,
a functional and object-oriented programming language
running on the CPython 3 VM.
“””
name = ‘dg’
aliases = [‘dg’]
filenames = [‘*.dg’]
mimetypes = [‘text/x-dg’]
url = ‘http://pyos.github.io/dg’
version_added = ‘1.6’</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tokens = {
    &#39;root&#39;: [
        (r&#39;\s+&#39;, Text),
        (r&#39;#.*?$&#39;, Comment.Single),

        (r&#39;(?i)0b[01]+&#39;, Number.Bin),
        (r&#39;(?i)0o[0-7]+&#39;, Number.Oct),
        (r&#39;(?i)0x[0-9a-f]+&#39;, Number.Hex),
        (r&#39;(?i)[+-]?[0-9]+\.[0-9]+(e[+-]?[0-9]+)?j?&#39;, Number.Float),
        (r&#39;(?i)[+-]?[0-9]+e[+-]?\d+j?&#39;, Number.Float),
        (r&#39;(?i)[+-]?[0-9]+j?&#39;, Number.Integer),

        (r&quot;(?i)(br|r?b?)&#39;&#39;&#39;&quot;, String, combined(&#39;stringescape&#39;, &#39;tsqs&#39;, &#39;string&#39;)),
        (r&#39;(?i)(br|r?b?)&quot;&quot;&quot;&#39;, String, combined(&#39;stringescape&#39;, &#39;tdqs&#39;, &#39;string&#39;)),
        (r&quot;(?i)(br|r?b?)&#39;&quot;, String, combined(&#39;stringescape&#39;, &#39;sqs&#39;, &#39;string&#39;)),
        (r&#39;(?i)(br|r?b?)&quot;&#39;, String, combined(&#39;stringescape&#39;, &#39;dqs&#39;, &#39;string&#39;)),

        (r&quot;`\w+&#39;*`&quot;, Operator),
        (r&#39;\b(and|in|is|or|where)\b&#39;, Operator.Word),
        (r&#39;[!$%&amp;*+\-./:&lt;-@\\^|~;,]+&#39;, Operator),

        (words((
            &#39;bool&#39;, &#39;bytearray&#39;, &#39;bytes&#39;, &#39;classmethod&#39;, &#39;complex&#39;, &#39;dict&#39;, &#39;dict\&#39;&#39;,
            &#39;float&#39;, &#39;frozenset&#39;, &#39;int&#39;, &#39;list&#39;, &#39;list\&#39;&#39;, &#39;memoryview&#39;, &#39;object&#39;,
            &#39;property&#39;, &#39;range&#39;, &#39;set&#39;, &#39;set\&#39;&#39;, &#39;slice&#39;, &#39;staticmethod&#39;, &#39;str&#39;,
            &#39;super&#39;, &#39;tuple&#39;, &#39;tuple\&#39;&#39;, &#39;type&#39;),
               prefix=r&#39;(?&lt;!\.)&#39;, suffix=r&#39;(?![\&#39;\w])&#39;),
         Name.Builtin),
        (words((
            &#39;__import__&#39;, &#39;abs&#39;, &#39;all&#39;, &#39;any&#39;, &#39;bin&#39;, &#39;bind&#39;, &#39;chr&#39;, &#39;cmp&#39;, &#39;compile&#39;,
            &#39;complex&#39;, &#39;delattr&#39;, &#39;dir&#39;, &#39;divmod&#39;, &#39;drop&#39;, &#39;dropwhile&#39;, &#39;enumerate&#39;,
            &#39;eval&#39;, &#39;exhaust&#39;, &#39;filter&#39;, &#39;flip&#39;, &#39;foldl1?&#39;, &#39;format&#39;, &#39;fst&#39;,
            &#39;getattr&#39;, &#39;globals&#39;, &#39;hasattr&#39;, &#39;hash&#39;, &#39;head&#39;, &#39;hex&#39;, &#39;id&#39;, &#39;init&#39;,
            &#39;input&#39;, &#39;isinstance&#39;, &#39;issubclass&#39;, &#39;iter&#39;, &#39;iterate&#39;, &#39;last&#39;, &#39;len&#39;,
            &#39;locals&#39;, &#39;map&#39;, &#39;max&#39;, &#39;min&#39;, &#39;next&#39;, &#39;oct&#39;, &#39;open&#39;, &#39;ord&#39;, &#39;pow&#39;,
            &#39;print&#39;, &#39;repr&#39;, &#39;reversed&#39;, &#39;round&#39;, &#39;setattr&#39;, &#39;scanl1?&#39;, &#39;snd&#39;,
            &#39;sorted&#39;, &#39;sum&#39;, &#39;tail&#39;, &#39;take&#39;, &#39;takewhile&#39;, &#39;vars&#39;, &#39;zip&#39;),
               prefix=r&#39;(?&lt;!\.)&#39;, suffix=r&#39;(?![\&#39;\w])&#39;),
         Name.Builtin),
        (r&quot;(?&lt;!\.)(self|Ellipsis|NotImplemented|None|True|False)(?![&#39;\w])&quot;,
         Name.Builtin.Pseudo),

        (r&quot;(?&lt;!\.)[A-Z]\w*(Error|Exception|Warning)&#39;*(?![&#39;\w])&quot;,
         Name.Exception),
        (r&quot;(?&lt;!\.)(Exception|GeneratorExit|KeyboardInterrupt|StopIteration|&quot;
         r&quot;SystemExit)(?![&#39;\w])&quot;, Name.Exception),

        (r&quot;(?&lt;![\w.])(except|finally|for|if|import|not|otherwise|raise|&quot;
         r&quot;subclass|while|with|yield)(?![&#39;\w])&quot;, Keyword.Reserved),

        (r&quot;[A-Z_]+&#39;*(?![&#39;\w])&quot;, Name),
        (r&quot;[A-Z]\w+&#39;*(?![&#39;\w])&quot;, Keyword.Type),
        (r&quot;\w+&#39;*&quot;, Name),

        (r&#39;[()]&#39;, Punctuation),
        (r&#39;.&#39;, Error),
    ],
    &#39;stringescape&#39;: [
        (r&#39;\\([\\abfnrtv&quot;\&#39;]|\n|N\{.*?\}|u[a-fA-F0-9]{4}|&#39;
         r&#39;U[a-fA-F0-9]{8}|x[a-fA-F0-9]{2}|[0-7]{1,3})&#39;, String.Escape)
    ],
    &#39;string&#39;: [
        (r&#39;%(\(\w+\))?[-#0 +]*([0-9]+|[*])?(\.([0-9]+|[*]))?&#39;
         &#39;[hlL]?[E-GXc-giorsux%]&#39;, String.Interpol),
        (r&#39;[^\\\&#39;&quot;%\n]+&#39;, String),
        # quotes, percents and backslashes must be parsed one at a time
        (r&#39;[\&#39;&quot;\\]&#39;, String),
        # unhandled string formatting sign
        (r&#39;%&#39;, String),
        (r&#39;\n&#39;, String)
    ],
    &#39;dqs&#39;: [
        (r&#39;&quot;&#39;, String, &#39;#pop&#39;)
    ],
    &#39;sqs&#39;: [
        (r&quot;&#39;&quot;, String, &#39;#pop&#39;)
    ],
    &#39;tdqs&#39;: [
        (r&#39;&quot;&quot;&quot;&#39;, String, &#39;#pop&#39;)
    ],
    &#39;tsqs&#39;: [
        (r&quot;&#39;&#39;&#39;&quot;, String, &#39;#pop&#39;)
    ],
}
</pre></div>
</div>
<p>class NumPyLexer(PythonLexer):
“””
A Python lexer recognizing Numerical Python builtins.
“””</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>name = &#39;NumPy&#39;
url = &#39;https://numpy.org/&#39;
aliases = [&#39;numpy&#39;]
version_added = &#39;0.10&#39;

# override the mimetypes to not inherit them from python
mimetypes = []
filenames = []

EXTRA_KEYWORDS = {
    &#39;abs&#39;, &#39;absolute&#39;, &#39;accumulate&#39;, &#39;add&#39;, &#39;alen&#39;, &#39;all&#39;, &#39;allclose&#39;,
    &#39;alltrue&#39;, &#39;alterdot&#39;, &#39;amax&#39;, &#39;amin&#39;, &#39;angle&#39;, &#39;any&#39;, &#39;append&#39;,
    &#39;apply_along_axis&#39;, &#39;apply_over_axes&#39;, &#39;arange&#39;, &#39;arccos&#39;, &#39;arccosh&#39;,
    &#39;arcsin&#39;, &#39;arcsinh&#39;, &#39;arctan&#39;, &#39;arctan2&#39;, &#39;arctanh&#39;, &#39;argmax&#39;, &#39;argmin&#39;,
    &#39;argsort&#39;, &#39;argwhere&#39;, &#39;around&#39;, &#39;array&#39;, &#39;array2string&#39;, &#39;array_equal&#39;,
    &#39;array_equiv&#39;, &#39;array_repr&#39;, &#39;array_split&#39;, &#39;array_str&#39;, &#39;arrayrange&#39;,
    &#39;asanyarray&#39;, &#39;asarray&#39;, &#39;asarray_chkfinite&#39;, &#39;ascontiguousarray&#39;,
    &#39;asfarray&#39;, &#39;asfortranarray&#39;, &#39;asmatrix&#39;, &#39;asscalar&#39;, &#39;astype&#39;,
    &#39;atleast_1d&#39;, &#39;atleast_2d&#39;, &#39;atleast_3d&#39;, &#39;average&#39;, &#39;bartlett&#39;,
    &#39;base_repr&#39;, &#39;beta&#39;, &#39;binary_repr&#39;, &#39;bincount&#39;, &#39;binomial&#39;,
    &#39;bitwise_and&#39;, &#39;bitwise_not&#39;, &#39;bitwise_or&#39;, &#39;bitwise_xor&#39;, &#39;blackman&#39;,
    &#39;bmat&#39;, &#39;broadcast&#39;, &#39;byte_bounds&#39;, &#39;bytes&#39;, &#39;byteswap&#39;, &#39;c_&#39;,
    &#39;can_cast&#39;, &#39;ceil&#39;, &#39;choose&#39;, &#39;clip&#39;, &#39;column_stack&#39;, &#39;common_type&#39;,
    &#39;compare_chararrays&#39;, &#39;compress&#39;, &#39;concatenate&#39;, &#39;conj&#39;, &#39;conjugate&#39;,
    &#39;convolve&#39;, &#39;copy&#39;, &#39;corrcoef&#39;, &#39;correlate&#39;, &#39;cos&#39;, &#39;cosh&#39;, &#39;cov&#39;,
    &#39;cross&#39;, &#39;cumprod&#39;, &#39;cumproduct&#39;, &#39;cumsum&#39;, &#39;delete&#39;, &#39;deprecate&#39;,
    &#39;diag&#39;, &#39;diagflat&#39;, &#39;diagonal&#39;, &#39;diff&#39;, &#39;digitize&#39;, &#39;disp&#39;, &#39;divide&#39;,
    &#39;dot&#39;, &#39;dsplit&#39;, &#39;dstack&#39;, &#39;dtype&#39;, &#39;dump&#39;, &#39;dumps&#39;, &#39;ediff1d&#39;, &#39;empty&#39;,
    &#39;empty_like&#39;, &#39;equal&#39;, &#39;exp&#39;, &#39;expand_dims&#39;, &#39;expm1&#39;, &#39;extract&#39;, &#39;eye&#39;,
    &#39;fabs&#39;, &#39;fastCopyAndTranspose&#39;, &#39;fft&#39;, &#39;fftfreq&#39;, &#39;fftshift&#39;, &#39;fill&#39;,
    &#39;finfo&#39;, &#39;fix&#39;, &#39;flat&#39;, &#39;flatnonzero&#39;, &#39;flatten&#39;, &#39;fliplr&#39;, &#39;flipud&#39;,
    &#39;floor&#39;, &#39;floor_divide&#39;, &#39;fmod&#39;, &#39;frexp&#39;, &#39;fromarrays&#39;, &#39;frombuffer&#39;,
    &#39;fromfile&#39;, &#39;fromfunction&#39;, &#39;fromiter&#39;, &#39;frompyfunc&#39;, &#39;fromstring&#39;,
    &#39;generic&#39;, &#39;get_array_wrap&#39;, &#39;get_include&#39;, &#39;get_numarray_include&#39;,
    &#39;get_numpy_include&#39;, &#39;get_printoptions&#39;, &#39;getbuffer&#39;, &#39;getbufsize&#39;,
    &#39;geterr&#39;, &#39;geterrcall&#39;, &#39;geterrobj&#39;, &#39;getfield&#39;, &#39;gradient&#39;, &#39;greater&#39;,
    &#39;greater_equal&#39;, &#39;gumbel&#39;, &#39;hamming&#39;, &#39;hanning&#39;, &#39;histogram&#39;,
    &#39;histogram2d&#39;, &#39;histogramdd&#39;, &#39;hsplit&#39;, &#39;hstack&#39;, &#39;hypot&#39;, &#39;i0&#39;,
    &#39;identity&#39;, &#39;ifft&#39;, &#39;imag&#39;, &#39;index_exp&#39;, &#39;indices&#39;, &#39;inf&#39;, &#39;info&#39;,
    &#39;inner&#39;, &#39;insert&#39;, &#39;int_asbuffer&#39;, &#39;interp&#39;, &#39;intersect1d&#39;,
    &#39;intersect1d_nu&#39;, &#39;inv&#39;, &#39;invert&#39;, &#39;iscomplex&#39;, &#39;iscomplexobj&#39;,
    &#39;isfinite&#39;, &#39;isfortran&#39;, &#39;isinf&#39;, &#39;isnan&#39;, &#39;isneginf&#39;, &#39;isposinf&#39;,
    &#39;isreal&#39;, &#39;isrealobj&#39;, &#39;isscalar&#39;, &#39;issctype&#39;, &#39;issubclass_&#39;,
    &#39;issubdtype&#39;, &#39;issubsctype&#39;, &#39;item&#39;, &#39;itemset&#39;, &#39;iterable&#39;, &#39;ix_&#39;,
    &#39;kaiser&#39;, &#39;kron&#39;, &#39;ldexp&#39;, &#39;left_shift&#39;, &#39;less&#39;, &#39;less_equal&#39;, &#39;lexsort&#39;,
    &#39;linspace&#39;, &#39;load&#39;, &#39;loads&#39;, &#39;loadtxt&#39;, &#39;log&#39;, &#39;log10&#39;, &#39;log1p&#39;, &#39;log2&#39;,
    &#39;logical_and&#39;, &#39;logical_not&#39;, &#39;logical_or&#39;, &#39;logical_xor&#39;, &#39;logspace&#39;,
    &#39;lstsq&#39;, &#39;mat&#39;, &#39;matrix&#39;, &#39;max&#39;, &#39;maximum&#39;, &#39;maximum_sctype&#39;,
    &#39;may_share_memory&#39;, &#39;mean&#39;, &#39;median&#39;, &#39;meshgrid&#39;, &#39;mgrid&#39;, &#39;min&#39;,
    &#39;minimum&#39;, &#39;mintypecode&#39;, &#39;mod&#39;, &#39;modf&#39;, &#39;msort&#39;, &#39;multiply&#39;, &#39;nan&#39;,
    &#39;nan_to_num&#39;, &#39;nanargmax&#39;, &#39;nanargmin&#39;, &#39;nanmax&#39;, &#39;nanmin&#39;, &#39;nansum&#39;,
    &#39;ndenumerate&#39;, &#39;ndim&#39;, &#39;ndindex&#39;, &#39;negative&#39;, &#39;newaxis&#39;, &#39;newbuffer&#39;,
    &#39;newbyteorder&#39;, &#39;nonzero&#39;, &#39;not_equal&#39;, &#39;obj2sctype&#39;, &#39;ogrid&#39;, &#39;ones&#39;,
    &#39;ones_like&#39;, &#39;outer&#39;, &#39;permutation&#39;, &#39;piecewise&#39;, &#39;pinv&#39;, &#39;pkgload&#39;,
    &#39;place&#39;, &#39;poisson&#39;, &#39;poly&#39;, &#39;poly1d&#39;, &#39;polyadd&#39;, &#39;polyder&#39;, &#39;polydiv&#39;,
    &#39;polyfit&#39;, &#39;polyint&#39;, &#39;polymul&#39;, &#39;polysub&#39;, &#39;polyval&#39;, &#39;power&#39;, &#39;prod&#39;,
    &#39;product&#39;, &#39;ptp&#39;, &#39;put&#39;, &#39;putmask&#39;, &#39;r_&#39;, &#39;randint&#39;, &#39;random_integers&#39;,
    &#39;random_sample&#39;, &#39;ranf&#39;, &#39;rank&#39;, &#39;ravel&#39;, &#39;real&#39;, &#39;real_if_close&#39;,
    &#39;recarray&#39;, &#39;reciprocal&#39;, &#39;reduce&#39;, &#39;remainder&#39;, &#39;repeat&#39;, &#39;require&#39;,
    &#39;reshape&#39;, &#39;resize&#39;, &#39;restoredot&#39;, &#39;right_shift&#39;, &#39;rint&#39;, &#39;roll&#39;,
    &#39;rollaxis&#39;, &#39;roots&#39;, &#39;rot90&#39;, &#39;round&#39;, &#39;round_&#39;, &#39;row_stack&#39;, &#39;s_&#39;,
    &#39;sample&#39;, &#39;savetxt&#39;, &#39;sctype2char&#39;, &#39;searchsorted&#39;, &#39;seed&#39;, &#39;select&#39;,
    &#39;set_numeric_ops&#39;, &#39;set_printoptions&#39;, &#39;set_string_function&#39;,
    &#39;setbufsize&#39;, &#39;setdiff1d&#39;, &#39;seterr&#39;, &#39;seterrcall&#39;, &#39;seterrobj&#39;,
    &#39;setfield&#39;, &#39;setflags&#39;, &#39;setmember1d&#39;, &#39;setxor1d&#39;, &#39;shape&#39;,
    &#39;show_config&#39;, &#39;shuffle&#39;, &#39;sign&#39;, &#39;signbit&#39;, &#39;sin&#39;, &#39;sinc&#39;, &#39;sinh&#39;,
    &#39;size&#39;, &#39;slice&#39;, &#39;solve&#39;, &#39;sometrue&#39;, &#39;sort&#39;, &#39;sort_complex&#39;, &#39;source&#39;,
    &#39;split&#39;, &#39;sqrt&#39;, &#39;square&#39;, &#39;squeeze&#39;, &#39;standard_normal&#39;, &#39;std&#39;,
    &#39;subtract&#39;, &#39;sum&#39;, &#39;svd&#39;, &#39;swapaxes&#39;, &#39;take&#39;, &#39;tan&#39;, &#39;tanh&#39;, &#39;tensordot&#39;,
    &#39;test&#39;, &#39;tile&#39;, &#39;tofile&#39;, &#39;tolist&#39;, &#39;tostring&#39;, &#39;trace&#39;, &#39;transpose&#39;,
    &#39;trapz&#39;, &#39;tri&#39;, &#39;tril&#39;, &#39;trim_zeros&#39;, &#39;triu&#39;, &#39;true_divide&#39;, &#39;typeDict&#39;,
    &#39;typename&#39;, &#39;uniform&#39;, &#39;union1d&#39;, &#39;unique&#39;, &#39;unique1d&#39;, &#39;unravel_index&#39;,
    &#39;unwrap&#39;, &#39;vander&#39;, &#39;var&#39;, &#39;vdot&#39;, &#39;vectorize&#39;, &#39;view&#39;, &#39;vonmises&#39;,
    &#39;vsplit&#39;, &#39;vstack&#39;, &#39;weibull&#39;, &#39;where&#39;, &#39;who&#39;, &#39;zeros&#39;, &#39;zeros_like&#39;
}

def get_tokens_unprocessed(self, text):
    for index, token, value in \
            PythonLexer.get_tokens_unprocessed(self, text):
        if token is Name and value in self.EXTRA_KEYWORDS:
            yield index, Keyword.Pseudo, value
        else:
            yield index, token, value

def analyse_text(text):
    ltext = text[:1000]
    return (shebang_matches(text, r&#39;pythonw?(3(\.\d)?)?&#39;) or
            &#39;import &#39; in ltext) \
        and (&#39;import numpy&#39; in ltext or &#39;from numpy import&#39; in ltext)
</pre></div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Adam Worsnip.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>