

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; Retrogue 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/custom.css?v=a6a68382" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/fonts.css?v=5583d106" />

  
      <script src="../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../_static/documentation_options.js?v=d45e8c67"></script>
      <script src="../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../index.html" class="icon icon-home">
            Retrogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">Retrogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../_sources/.venv/lib/python3.14/site-packages/pip/_vendor/pygments/sphinxext.py.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>“””
pygments.sphinxext
~~~~~~~~~~~~~~~~~~</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Sphinx extension to generate automatic documentation of lexers,
formatters and filters.

:copyright: Copyright 2006-2025 by the Pygments team, see AUTHORS.
:license: BSD, see LICENSE for details.
</pre></div>
</div>
<p>“””</p>
<p>import sys</p>
<p>from docutils import nodes
from docutils.statemachine import ViewList
from docutils.parsers.rst import Directive
from sphinx.util.nodes import nested_parse_with_titles</p>
<p>MODULEDOC = ‘’’
.. module:: %s</p>
<p>‘’’</p>
<p>LEXERDOC = ‘’’
.. class:: %s</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>:Short names: %s
:Filenames:   %s
:MIME types:  %s

%s

%s
</pre></div>
</div>
<p>‘’’</p>
<p>FMTERDOC = ‘’’
.. class:: %s</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>:Short names: %s
:Filenames: %s

%s
</pre></div>
</div>
<p>‘’’</p>
<p>FILTERDOC = ‘’’
.. class:: %s</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>:Name: %s

%s
</pre></div>
</div>
<p>‘’’</p>
<p>class PygmentsDoc(Directive):
“””
A directive to collect all lexers/formatters/filters and generate
autoclass directives for them.
“””
has_content = False
required_arguments = 1
optional_arguments = 0
final_argument_whitespace = False
option_spec = {}</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def run(self):
    self.filenames = set()
    if self.arguments[0] == &#39;lexers&#39;:
        out = self.document_lexers()
    elif self.arguments[0] == &#39;formatters&#39;:
        out = self.document_formatters()
    elif self.arguments[0] == &#39;filters&#39;:
        out = self.document_filters()
    elif self.arguments[0] == &#39;lexers_overview&#39;:
        out = self.document_lexers_overview()
    else:
        raise Exception(&#39;invalid argument for &quot;pygmentsdoc&quot; directive&#39;)
    node = nodes.compound()
    vl = ViewList(out.split(&#39;\n&#39;), source=&#39;&#39;)
    nested_parse_with_titles(self.state, vl, node)
    for fn in self.filenames:
        self.state.document.settings.record_dependencies.add(fn)
    return node.children

def document_lexers_overview(self):
    &quot;&quot;&quot;Generate a tabular overview of all lexers.

    The columns are the lexer name, the extensions handled by this lexer
    (or &quot;None&quot;), the aliases and a link to the lexer class.&quot;&quot;&quot;
    from pip._vendor.pygments.lexers._mapping import LEXERS
    from pip._vendor.pygments.lexers import find_lexer_class
    out = []

    table = []

    def format_link(name, url):
        if url:
            return f&#39;`{name} &lt;{url}&gt;`_&#39;
        return name

    for classname, data in sorted(LEXERS.items(), key=lambda x: x[1][1].lower()):
        lexer_cls = find_lexer_class(data[1])
        extensions = lexer_cls.filenames + lexer_cls.alias_filenames

        table.append({
            &#39;name&#39;: format_link(data[1], lexer_cls.url),
            &#39;extensions&#39;: &#39;, &#39;.join(extensions).replace(&#39;*&#39;, &#39;\\*&#39;).replace(&#39;_&#39;, &#39;\\&#39;) or &#39;None&#39;,
            &#39;aliases&#39;: &#39;, &#39;.join(data[2]),
            &#39;class&#39;: f&#39;{data[0]}.{classname}&#39;
        })

    column_names = [&#39;name&#39;, &#39;extensions&#39;, &#39;aliases&#39;, &#39;class&#39;]
    column_lengths = [max([len(row[column]) for row in table if row[column]])
                      for column in column_names]

    def write_row(*columns):
        &quot;&quot;&quot;Format a table row&quot;&quot;&quot;
        out = []
        for length, col in zip(column_lengths, columns):
            if col:
                out.append(col.ljust(length))
            else:
                out.append(&#39; &#39;*length)

        return &#39; &#39;.join(out)

    def write_seperator():
        &quot;&quot;&quot;Write a table separator row&quot;&quot;&quot;
        sep = [&#39;=&#39;*c for c in column_lengths]
        return write_row(*sep)

    out.append(write_seperator())
    out.append(write_row(&#39;Name&#39;, &#39;Extension(s)&#39;, &#39;Short name(s)&#39;, &#39;Lexer class&#39;))
    out.append(write_seperator())
    for row in table:
        out.append(write_row(
            row[&#39;name&#39;],
            row[&#39;extensions&#39;],
            row[&#39;aliases&#39;],
            f&#39;:class:`~{row[&quot;class&quot;]}`&#39;))
    out.append(write_seperator())

    return &#39;\n&#39;.join(out)

def document_lexers(self):
    from pip._vendor.pygments.lexers._mapping import LEXERS
    from pip._vendor import pygments
    import inspect
    import pathlib

    out = []
    modules = {}
    moduledocstrings = {}
    for classname, data in sorted(LEXERS.items(), key=lambda x: x[0]):
        module = data[0]
        mod = __import__(module, None, None, [classname])
        self.filenames.add(mod.__file__)
        cls = getattr(mod, classname)
        if not cls.__doc__:
            print(f&quot;Warning: {classname} does not have a docstring.&quot;)
        docstring = cls.__doc__
        if isinstance(docstring, bytes):
            docstring = docstring.decode(&#39;utf8&#39;)

        example_file = getattr(cls, &#39;_example&#39;, None)
        if example_file:
            p = pathlib.Path(inspect.getabsfile(pygments)).parent.parent /\
                &#39;tests&#39; / &#39;examplefiles&#39; / example_file
            content = p.read_text(encoding=&#39;utf-8&#39;)
            if not content:
                raise Exception(
                    f&quot;Empty example file &#39;{example_file}&#39; for lexer &quot;
                    f&quot;{classname}&quot;)

            if data[2]:
                lexer_name = data[2][0]
                docstring += &#39;\n\n    .. admonition:: Example\n&#39;
                docstring += f&#39;\n      .. code-block:: {lexer_name}\n\n&#39;
                for line in content.splitlines():
                    docstring += f&#39;          {line}\n&#39;

        if cls.version_added:
            version_line = f&#39;.. versionadded:: {cls.version_added}&#39;
        else:
            version_line = &#39;&#39;

        modules.setdefault(module, []).append((
            classname,
            &#39;, &#39;.join(data[2]) or &#39;None&#39;,
            &#39;, &#39;.join(data[3]).replace(&#39;*&#39;, &#39;\\*&#39;).replace(&#39;_&#39;, &#39;\\&#39;) or &#39;None&#39;,
            &#39;, &#39;.join(data[4]) or &#39;None&#39;,
            docstring,
            version_line))
        if module not in moduledocstrings:
            moddoc = mod.__doc__
            if isinstance(moddoc, bytes):
                moddoc = moddoc.decode(&#39;utf8&#39;)
            moduledocstrings[module] = moddoc

    for module, lexers in sorted(modules.items(), key=lambda x: x[0]):
        if moduledocstrings[module] is None:
            raise Exception(f&quot;Missing docstring for {module}&quot;)
        heading = moduledocstrings[module].splitlines()[4].strip().rstrip(&#39;.&#39;)
        out.append(MODULEDOC % (module, heading, &#39;-&#39;*len(heading)))
        for data in lexers:
            out.append(LEXERDOC % data)

    return &#39;&#39;.join(out)

def document_formatters(self):
    from pip._vendor.pygments.formatters import FORMATTERS

    out = []
    for classname, data in sorted(FORMATTERS.items(), key=lambda x: x[0]):
        module = data[0]
        mod = __import__(module, None, None, [classname])
        self.filenames.add(mod.__file__)
        cls = getattr(mod, classname)
        docstring = cls.__doc__
        if isinstance(docstring, bytes):
            docstring = docstring.decode(&#39;utf8&#39;)
        heading = cls.__name__
        out.append(FMTERDOC % (heading, &#39;, &#39;.join(data[2]) or &#39;None&#39;,
                               &#39;, &#39;.join(data[3]).replace(&#39;*&#39;, &#39;\\*&#39;) or &#39;None&#39;,
                               docstring))
    return &#39;&#39;.join(out)

def document_filters(self):
    from pip._vendor.pygments.filters import FILTERS

    out = []
    for name, cls in FILTERS.items():
        self.filenames.add(sys.modules[cls.__module__].__file__)
        docstring = cls.__doc__
        if isinstance(docstring, bytes):
            docstring = docstring.decode(&#39;utf8&#39;)
        out.append(FILTERDOC % (cls.__name__, name, docstring))
    return &#39;&#39;.join(out)
</pre></div>
</div>
<p>def setup(app):
app.add_directive(‘pygmentsdoc’, PygmentsDoc)</p>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Adam Worsnip.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>