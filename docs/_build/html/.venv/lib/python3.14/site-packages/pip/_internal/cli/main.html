

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Do not import and use main() directly! Using it directly is actively &mdash; Retrogue 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/custom.css?v=a6a68382" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/fonts.css?v=5583d106" />

  
      <script src="../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../_static/documentation_options.js?v=d45e8c67"></script>
      <script src="../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../index.html" class="icon icon-home">
            Retrogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">Retrogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Do not import and use main() directly! Using it directly is actively</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../_sources/.venv/lib/python3.14/site-packages/pip/_internal/cli/main.py.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>“””Primary application entrypoint.”””</p>
<p>from <strong>future</strong> import annotations</p>
<p>import locale
import logging
import os
import sys
import warnings</p>
<p>from pip._internal.cli.autocompletion import autocomplete
from pip._internal.cli.main_parser import parse_command
from pip._internal.commands import create_command
from pip._internal.exceptions import PipError
from pip._internal.utils import deprecation</p>
<p>logger = logging.getLogger(<strong>name</strong>)</p>
<section id="do-not-import-and-use-main-directly-using-it-directly-is-actively">
<h1>Do not import and use main() directly! Using it directly is actively<a class="headerlink" href="#do-not-import-and-use-main-directly-using-it-directly-is-actively" title="Link to this heading"></a></h1>
</section>
<section id="discouraged-by-pip-s-maintainers-the-name-location-and-behavior-of">
<h1>discouraged by pip’s maintainers. The name, location and behavior of<a class="headerlink" href="#discouraged-by-pip-s-maintainers-the-name-location-and-behavior-of" title="Link to this heading"></a></h1>
</section>
<section id="this-function-is-subject-to-change-so-calling-it-directly-is-not">
<h1>this function is subject to change, so calling it directly is not<a class="headerlink" href="#this-function-is-subject-to-change-so-calling-it-directly-is-not" title="Link to this heading"></a></h1>
</section>
<section id="portable-across-different-pip-versions">
<h1>portable across different pip versions.<a class="headerlink" href="#portable-across-different-pip-versions" title="Link to this heading"></a></h1>
</section>
<section id="in-addition-running-pip-in-process-is-unsupported-and-unsafe-this-is">
<h1>In addition, running pip in-process is unsupported and unsafe. This is<a class="headerlink" href="#in-addition-running-pip-in-process-is-unsupported-and-unsafe-this-is" title="Link to this heading"></a></h1>
</section>
<section id="elaborated-in-detail-at">
<h1>elaborated in detail at<a class="headerlink" href="#elaborated-in-detail-at" title="Link to this heading"></a></h1>
</section>
<section id="https-pip-pypa-io-en-stable-user-guide-using-pip-from-your-program">
<h1>https://pip.pypa.io/en/stable/user_guide/#using-pip-from-your-program.<a class="headerlink" href="#https-pip-pypa-io-en-stable-user-guide-using-pip-from-your-program" title="Link to this heading"></a></h1>
</section>
<section id="that-document-also-provides-suggestions-that-should-work-for-nearly">
<h1>That document also provides suggestions that should work for nearly<a class="headerlink" href="#that-document-also-provides-suggestions-that-should-work-for-nearly" title="Link to this heading"></a></h1>
</section>
<section id="all-users-that-are-considering-importing-and-using-main-directly">
<h1>all users that are considering importing and using main() directly.<a class="headerlink" href="#all-users-that-are-considering-importing-and-using-main-directly" title="Link to this heading"></a></h1>
</section>
<section id="however-we-know-that-certain-users-will-still-want-to-invoke-pip">
<h1>However, we know that certain users will still want to invoke pip<a class="headerlink" href="#however-we-know-that-certain-users-will-still-want-to-invoke-pip" title="Link to this heading"></a></h1>
</section>
<section id="in-process-if-you-understand-and-accept-the-implications-of-using-pip">
<h1>in-process. If you understand and accept the implications of using pip<a class="headerlink" href="#in-process-if-you-understand-and-accept-the-implications-of-using-pip" title="Link to this heading"></a></h1>
</section>
<section id="in-an-unsupported-manner-the-best-approach-is-to-use-runpy-to-avoid">
<h1>in an unsupported manner, the best approach is to use runpy to avoid<a class="headerlink" href="#in-an-unsupported-manner-the-best-approach-is-to-use-runpy-to-avoid" title="Link to this heading"></a></h1>
</section>
<section id="depending-on-the-exact-location-of-this-entry-point">
<h1>depending on the exact location of this entry point.<a class="headerlink" href="#depending-on-the-exact-location-of-this-entry-point" title="Link to this heading"></a></h1>
</section>
<section id="the-following-example-shows-how-to-use-runpy-to-invoke-pip-in-that">
<h1>The following example shows how to use runpy to invoke pip in that<a class="headerlink" href="#the-following-example-shows-how-to-use-runpy-to-invoke-pip-in-that" title="Link to this heading"></a></h1>
</section>
<section id="case">
<h1>case:<a class="headerlink" href="#case" title="Link to this heading"></a></h1>
</section>
<section id="id1">
<h1><a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
</section>
<section id="sys-argv-pip-your-args-here">
<h1>sys.argv = [“pip”, your, args, here]<a class="headerlink" href="#sys-argv-pip-your-args-here" title="Link to this heading"></a></h1>
</section>
<section id="runpy-run-module-pip-run-name-main">
<h1>runpy.run_module(“pip”, run_name=”<strong>main</strong>”)<a class="headerlink" href="#runpy-run-module-pip-run-name-main" title="Link to this heading"></a></h1>
</section>
<section id="id2">
<h1><a class="headerlink" href="#id2" title="Link to this heading"></a></h1>
</section>
<section id="note-that-this-will-exit-the-process-after-running-unlike-a-direct">
<h1>Note that this will exit the process after running, unlike a direct<a class="headerlink" href="#note-that-this-will-exit-the-process-after-running-unlike-a-direct" title="Link to this heading"></a></h1>
</section>
<section id="call-to-main-as-it-is-not-safe-to-do-any-processing-after-calling">
<h1>call to main. As it is not safe to do any processing after calling<a class="headerlink" href="#call-to-main-as-it-is-not-safe-to-do-any-processing-after-calling" title="Link to this heading"></a></h1>
</section>
<section id="main-this-should-not-be-an-issue-in-practice">
<h1>main, this should not be an issue in practice.<a class="headerlink" href="#main-this-should-not-be-an-issue-in-practice" title="Link to this heading"></a></h1>
<p>def main(args: list[str] | None = None) -&gt; int:
if args is None:
args = sys.argv[1:]</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Suppress the pkg_resources deprecation warning
# Note - we use a module of .*pkg_resources to cover
# the normal case (pip._vendor.pkg_resources) and the
# devendored case (a bare pkg_resources)
warnings.filterwarnings(
    action=&quot;ignore&quot;, category=DeprecationWarning, module=&quot;.*pkg_resources&quot;
)

# Configure our deprecation warnings to be sent through loggers
deprecation.install_warning_logger()

autocomplete()

try:
    cmd_name, cmd_args = parse_command(args)
except PipError as exc:
    sys.stderr.write(f&quot;ERROR: {exc}&quot;)
    sys.stderr.write(os.linesep)
    sys.exit(1)

# Needed for locale.getpreferredencoding(False) to work
# in pip._internal.utils.encoding.auto_decode
try:
    locale.setlocale(locale.LC_ALL, &quot;&quot;)
except locale.Error as e:
    # setlocale can apparently crash if locale are uninitialized
    logger.debug(&quot;Ignoring error %s when setting locale&quot;, e)
command = create_command(cmd_name, isolated=(&quot;--isolated&quot; in cmd_args))

return command.main(cmd_args)
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Adam Worsnip.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>