

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title> &mdash; Retrogue 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/custom.css?v=a6a68382" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/fonts.css?v=5583d106" />

  
      <script src="../../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../../_static/documentation_options.js?v=d45e8c67"></script>
      <script src="../../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../../index.html" class="icon icon-home">
            Retrogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../../index.html">Retrogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../../_sources/.venv/lib/python3.14/site-packages/pip/_vendor/packaging/licenses/__init__.py.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>#######################################################################################</p>
<section id="id1">
<h1><a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
</section>
<section id="adapted-from">
<h1>Adapted from:<a class="headerlink" href="#adapted-from" title="Link to this heading"></a></h1>
</section>
<section id="https-github-com-pypa-hatch-blob-5352e44-backend-src-hatchling-licenses-parse-py">
<h1>https://github.com/pypa/hatch/blob/5352e44/backend/src/hatchling/licenses/parse.py<a class="headerlink" href="#https-github-com-pypa-hatch-blob-5352e44-backend-src-hatchling-licenses-parse-py" title="Link to this heading"></a></h1>
</section>
<section id="id2">
<h1><a class="headerlink" href="#id2" title="Link to this heading"></a></h1>
</section>
<section id="mit-license">
<h1>MIT License<a class="headerlink" href="#mit-license" title="Link to this heading"></a></h1>
</section>
<section id="id3">
<h1><a class="headerlink" href="#id3" title="Link to this heading"></a></h1>
</section>
<section id="copyright-c-2017-present-ofek-lev-oss-ofek-dev">
<h1>Copyright (c) 2017-present Ofek Lev <a class="reference external" href="mailto:oss&#37;&#52;&#48;ofek&#46;dev">oss<span>&#64;</span>ofek<span>&#46;</span>dev</a><a class="headerlink" href="#copyright-c-2017-present-ofek-lev-oss-ofek-dev" title="Link to this heading"></a></h1>
</section>
<section id="id4">
<h1><a class="headerlink" href="#id4" title="Link to this heading"></a></h1>
</section>
<section id="permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this">
<h1>Permission is hereby granted, free of charge, to any person obtaining a copy of this<a class="headerlink" href="#permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this" title="Link to this heading"></a></h1>
</section>
<section id="software-and-associated-documentation-files-the-software-to-deal-in-the-software">
<h1>software and associated documentation files (the “Software”), to deal in the Software<a class="headerlink" href="#software-and-associated-documentation-files-the-software-to-deal-in-the-software" title="Link to this heading"></a></h1>
</section>
<section id="without-restriction-including-without-limitation-the-rights-to-use-copy-modify">
<h1>without restriction, including without limitation the rights to use, copy, modify,<a class="headerlink" href="#without-restriction-including-without-limitation-the-rights-to-use-copy-modify" title="Link to this heading"></a></h1>
</section>
<section id="merge-publish-distribute-sublicense-and-or-sell-copies-of-the-software-and-to">
<h1>merge, publish, distribute, sublicense, and/or sell copies of the Software, and to<a class="headerlink" href="#merge-publish-distribute-sublicense-and-or-sell-copies-of-the-software-and-to" title="Link to this heading"></a></h1>
</section>
<section id="permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following">
<h1>permit persons to whom the Software is furnished to do so, subject to the following<a class="headerlink" href="#permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following" title="Link to this heading"></a></h1>
</section>
<section id="conditions">
<h1>conditions:<a class="headerlink" href="#conditions" title="Link to this heading"></a></h1>
</section>
<section id="id5">
<h1><a class="headerlink" href="#id5" title="Link to this heading"></a></h1>
</section>
<section id="the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies">
<h1>The above copyright notice and this permission notice shall be included in all copies<a class="headerlink" href="#the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies" title="Link to this heading"></a></h1>
</section>
<section id="or-substantial-portions-of-the-software">
<h1>or substantial portions of the Software.<a class="headerlink" href="#or-substantial-portions-of-the-software" title="Link to this heading"></a></h1>
</section>
<section id="id6">
<h1><a class="headerlink" href="#id6" title="Link to this heading"></a></h1>
</section>
<section id="the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied">
<h1>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,<a class="headerlink" href="#the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied" title="Link to this heading"></a></h1>
</section>
<section id="including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a">
<h1>INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A<a class="headerlink" href="#including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a" title="Link to this heading"></a></h1>
</section>
<section id="particular-purpose-and-noninfringement-in-no-event-shall-the-authors-or-copyright">
<h1>PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT<a class="headerlink" href="#particular-purpose-and-noninfringement-in-no-event-shall-the-authors-or-copyright" title="Link to this heading"></a></h1>
</section>
<section id="holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of">
<h1>HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF<a class="headerlink" href="#holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of" title="Link to this heading"></a></h1>
</section>
<section id="contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software">
<h1>CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE<a class="headerlink" href="#contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software" title="Link to this heading"></a></h1>
</section>
<section id="or-the-use-or-other-dealings-in-the-software">
<h1>OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<a class="headerlink" href="#or-the-use-or-other-dealings-in-the-software" title="Link to this heading"></a></h1>
</section>
<section id="id7">
<h1><a class="headerlink" href="#id7" title="Link to this heading"></a></h1>
</section>
<section id="id8">
<h1><a class="headerlink" href="#id8" title="Link to this heading"></a></h1>
</section>
<section id="with-additional-allowance-of-arbitrary-licenseref-identifiers-not-just">
<h1>With additional allowance of arbitrary <code class="docutils literal notranslate"><span class="pre">LicenseRef-</span></code> identifiers, not just<a class="headerlink" href="#with-additional-allowance-of-arbitrary-licenseref-identifiers-not-just" title="Link to this heading"></a></h1>
</section>
<section id="licenseref-public-domain-and-licenseref-proprietary">
<h1><code class="docutils literal notranslate"><span class="pre">LicenseRef-Public-Domain</span></code> and <code class="docutils literal notranslate"><span class="pre">LicenseRef-Proprietary</span></code>.<a class="headerlink" href="#licenseref-public-domain-and-licenseref-proprietary" title="Link to this heading"></a></h1>
</section>
<section id="id9">
<h1><a class="headerlink" href="#id9" title="Link to this heading"></a></h1>
<p>#######################################################################################
from <strong>future</strong> import annotations</p>
<p>import re
from typing import NewType, cast</p>
<p>from pip._vendor.packaging.licenses._spdx import EXCEPTIONS, LICENSES</p>
<p><strong>all</strong> = [
“InvalidLicenseExpression”,
“NormalizedLicenseExpression”,
“canonicalize_license_expression”,
]</p>
<p>license_ref_allowed = re.compile(“^[A-Za-z0-9.-]*$”)</p>
<p>NormalizedLicenseExpression = NewType(“NormalizedLicenseExpression”, str)</p>
<p>class InvalidLicenseExpression(ValueError):
“””Raised when a license-expression string is invalid</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; canonicalize_license_expression(&quot;invalid&quot;)
Traceback (most recent call last):
    ...
packaging.licenses.InvalidLicenseExpression: Invalid license expression: &#39;invalid&#39;
&quot;&quot;&quot;
</pre></div>
</div>
<p>def canonicalize_license_expression(
raw_license_expression: str,
) -&gt; NormalizedLicenseExpression:
if not raw_license_expression:
message = f”Invalid license expression: {raw_license_expression!r}”
raise InvalidLicenseExpression(message)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Pad any parentheses so tokenization can be achieved by merely splitting on
# whitespace.
license_expression = raw_license_expression.replace(&quot;(&quot;, &quot; ( &quot;).replace(&quot;)&quot;, &quot; ) &quot;)
licenseref_prefix = &quot;LicenseRef-&quot;
license_refs = {
    ref.lower(): &quot;LicenseRef-&quot; + ref[len(licenseref_prefix) :]
    for ref in license_expression.split()
    if ref.lower().startswith(licenseref_prefix.lower())
}

# Normalize to lower case so we can look up licenses/exceptions
# and so boolean operators are Python-compatible.
license_expression = license_expression.lower()

tokens = license_expression.split()

# Rather than implementing boolean logic, we create an expression that Python can
# parse. Everything that is not involved with the grammar itself is treated as
# `False` and the expression should evaluate as such.
python_tokens = []
for token in tokens:
    if token not in {&quot;or&quot;, &quot;and&quot;, &quot;with&quot;, &quot;(&quot;, &quot;)&quot;}:
        python_tokens.append(&quot;False&quot;)
    elif token == &quot;with&quot;:
        python_tokens.append(&quot;or&quot;)
    elif token == &quot;(&quot; and python_tokens and python_tokens[-1] not in {&quot;or&quot;, &quot;and&quot;}:
        message = f&quot;Invalid license expression: {raw_license_expression!r}&quot;
        raise InvalidLicenseExpression(message)
    else:
        python_tokens.append(token)

python_expression = &quot; &quot;.join(python_tokens)
try:
    invalid = eval(python_expression, globals(), locals())
except Exception:
    invalid = True

if invalid is not False:
    message = f&quot;Invalid license expression: {raw_license_expression!r}&quot;
    raise InvalidLicenseExpression(message) from None

# Take a final pass to check for unknown licenses/exceptions.
normalized_tokens = []
for token in tokens:
    if token in {&quot;or&quot;, &quot;and&quot;, &quot;with&quot;, &quot;(&quot;, &quot;)&quot;}:
        normalized_tokens.append(token.upper())
        continue

    if normalized_tokens and normalized_tokens[-1] == &quot;WITH&quot;:
        if token not in EXCEPTIONS:
            message = f&quot;Unknown license exception: {token!r}&quot;
            raise InvalidLicenseExpression(message)

        normalized_tokens.append(EXCEPTIONS[token][&quot;id&quot;])
    else:
        if token.endswith(&quot;+&quot;):
            final_token = token[:-1]
            suffix = &quot;+&quot;
        else:
            final_token = token
            suffix = &quot;&quot;

        if final_token.startswith(&quot;licenseref-&quot;):
            if not license_ref_allowed.match(final_token):
                message = f&quot;Invalid licenseref: {final_token!r}&quot;
                raise InvalidLicenseExpression(message)
            normalized_tokens.append(license_refs[final_token] + suffix)
        else:
            if final_token not in LICENSES:
                message = f&quot;Unknown license: {final_token!r}&quot;
                raise InvalidLicenseExpression(message)
            normalized_tokens.append(LICENSES[final_token][&quot;id&quot;] + suffix)

normalized_expression = &quot; &quot;.join(normalized_tokens)

return cast(
    NormalizedLicenseExpression,
    normalized_expression.replace(&quot;( &quot;, &quot;(&quot;).replace(&quot; )&quot;, &quot;)&quot;),
)
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Adam Worsnip.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>