

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SPDX-License-Identifier: MIT &mdash; Retrogue 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/custom.css?v=a6a68382" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../_static/fonts.css?v=5583d106" />

  
      <script src="../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../_static/documentation_options.js?v=d45e8c67"></script>
      <script src="../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../index.html" class="icon icon-home">
            Retrogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">Retrogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">SPDX-License-Identifier: MIT</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../_sources/.venv/lib/python3.14/site-packages/pip/_vendor/tomli/_re.py.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="spdx-license-identifier-mit">
<h1>SPDX-License-Identifier: MIT<a class="headerlink" href="#spdx-license-identifier-mit" title="Link to this heading"></a></h1>
</section>
<section id="spdx-filecopyrighttext-2021-taneli-hukkinen">
<h1>SPDX-FileCopyrightText: 2021 Taneli Hukkinen<a class="headerlink" href="#spdx-filecopyrighttext-2021-taneli-hukkinen" title="Link to this heading"></a></h1>
</section>
<section id="licensed-to-psf-under-a-contributor-agreement">
<h1>Licensed to PSF under a Contributor Agreement.<a class="headerlink" href="#licensed-to-psf-under-a-contributor-agreement" title="Link to this heading"></a></h1>
<p>from <strong>future</strong> import annotations</p>
<p>from datetime import date, datetime, time, timedelta, timezone, tzinfo
from functools import lru_cache
import re</p>
<p>TYPE_CHECKING = False
if TYPE_CHECKING:
from typing import Any, Final</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from ._types import ParseFloat
</pre></div>
</div>
</section>
<section id="e-g">
<h1>E.g.<a class="headerlink" href="#e-g" title="Link to this heading"></a></h1>
</section>
<section id="id1">
<h1>- 00:32:00.999999<a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
</section>
<section id="id2">
<h1>- 00:32:00<a class="headerlink" href="#id2" title="Link to this heading"></a></h1>
<p>_TIME_RE_STR: Final = (
r”([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(?:.([0-9]{1,6})[0-9]*)?”
)</p>
<p>RE_NUMBER: Final = re.compile(
r”””
0
(?:
x<a class="reference internal" href="#?:_?%5B0-9A-Fa-f%5D"><span class="xref myst">0-9A-Fa-f</span></a>*   # hex
|
b<a class="reference internal" href="#?:_?%5B01%5D"><span class="xref myst">01</span></a>*                 # bin
|
o<a class="reference internal" href="#?:_?%5B0-7%5D"><span class="xref myst">0-7</span></a>*               # oct
)
|
[+-]?(?:0|<a class="reference internal" href="#?:_?%5B0-9%5D"><span class="xref myst">1-9</span></a><em>)         # dec, integer part
(?P<floatpart>
(?:.<a class="reference internal" href="#?:_?%5B0-9%5D"><span class="xref myst">0-9</span></a></em>)?         # optional fractional part
(?:[eE][+-]?<a class="reference internal" href="#?:_?%5B0-9%5D"><span class="xref myst">0-9</span></a>*)?  # optional exponent part
)
“””,
flags=re.VERBOSE,
)
RE_LOCALTIME: Final = re.compile(_TIME_RE_STR)
RE_DATETIME: Final = re.compile(
rf”””
([0-9]{{4}})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])  # date, e.g. 1988-10-27
(?:
[Tt ]
{_TIME_RE_STR}
(?:([Zz])|([+-])([01][0-9]|2[0-3]):([0-5][0-9]))?  # optional time offset
)?
“””,
flags=re.VERBOSE,
)</p>
<p>def match_to_datetime(match: re.Match[str]) -&gt; datetime | date:
“””Convert a <code class="docutils literal notranslate"><span class="pre">RE_DATETIME</span></code> match to <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> or <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Raises ValueError if the match does not correspond to a valid date
or datetime.
&quot;&quot;&quot;
(
    year_str,
    month_str,
    day_str,
    hour_str,
    minute_str,
    sec_str,
    micros_str,
    zulu_time,
    offset_sign_str,
    offset_hour_str,
    offset_minute_str,
) = match.groups()
year, month, day = int(year_str), int(month_str), int(day_str)
if hour_str is None:
    return date(year, month, day)
hour, minute, sec = int(hour_str), int(minute_str), int(sec_str)
micros = int(micros_str.ljust(6, &quot;0&quot;)) if micros_str else 0
if offset_sign_str:
    tz: tzinfo | None = cached_tz(
        offset_hour_str, offset_minute_str, offset_sign_str
    )
elif zulu_time:
    tz = timezone.utc
else:  # local date-time
    tz = None
return datetime(year, month, day, hour, minute, sec, micros, tzinfo=tz)
</pre></div>
</div>
</section>
<section id="no-need-to-limit-cache-size-this-is-only-ever-called-on-input">
<h1>No need to limit cache size. This is only ever called on input<a class="headerlink" href="#no-need-to-limit-cache-size-this-is-only-ever-called-on-input" title="Link to this heading"></a></h1>
</section>
<section id="that-matched-re-datetime-so-there-is-an-implicit-bound-of">
<h1>that matched RE_DATETIME, so there is an implicit bound of<a class="headerlink" href="#that-matched-re-datetime-so-there-is-an-implicit-bound-of" title="Link to this heading"></a></h1>
</section>
<section id="hours-60-minutes-2-offset-direction-2880">
<h1>24 (hours) * 60 (minutes) * 2 (offset direction) = 2880.<a class="headerlink" href="#hours-60-minutes-2-offset-direction-2880" title="Link to this heading"></a></h1>
<p>&#64;lru_cache(maxsize=None)
def cached_tz(hour_str: str, minute_str: str, sign_str: str) -&gt; timezone:
sign = 1 if sign_str == “+” else -1
return timezone(
timedelta(
hours=sign * int(hour_str),
minutes=sign * int(minute_str),
)
)</p>
<p>def match_to_localtime(match: re.Match[str]) -&gt; time:
hour_str, minute_str, sec_str, micros_str = match.groups()
micros = int(micros_str.ljust(6, “0”)) if micros_str else 0
return time(int(hour_str), int(minute_str), int(sec_str), micros)</p>
<p>def match_to_number(match: re.Match[str], parse_float: ParseFloat) -&gt; Any:
if match.group(“floatpart”):
return parse_float(match.group())
return int(match.group(), 0)</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Adam Worsnip.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>